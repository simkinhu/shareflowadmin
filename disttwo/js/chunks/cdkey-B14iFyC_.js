import{d as w,r as p,q as h,j as v,k,c as t,_ as s,u as a,ac as n,l as d,B as S,K as x}from"./@vue-Ca6oPw20.js";import{u as C,_ as A,b as $,e as y,c as U,g as V,d as B,i as I}from"../index-CZ3wx6ww.js";import{_ as P,a as L}from"./Label.vue_vue_type_script_setup_true_lang-BuuS3lAw.js";import{u as M}from"./useConfigStore-BJP49b-x.js";import{a as l,M as b}from"./ant-design-vue-CyiF9e54.js";import"./pinia-B0xTW-XS.js";import"./vue-demi-Dq6ymT-8.js";import"./@vueuse-BnZciM7y.js";import"./axios-DTyqpfTh.js";import"./@multiavatar-dxrVjIoY.js";import"./crypto-js-l0AFIALE.js";import"./class-variance-authority-Bb4qSo10.js";import"./clsx-B-dksMZM.js";import"./tailwind-merge-BkWO730n.js";import"./radix-vue-B6u9mWk8.js";import"./@floating-ui-DW8MF69D.js";import"./@radix-icons--IQtXok_.js";import"./@iconify-DzGEP68A.js";import"./lucide-vue-next-BGOoG6k-.js";import"./@ant-design-C6rk-XVk.js";import"./@ctrl-DOFZgDuz.js";import"./vue-router-Dial6ibt.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./@babel-BiFW4_mA.js";import"./lodash-es-D9ej4-U1.js";import"./vue-types-C5fUfLeo.js";import"./dom-align-CRCehRfe.js";import"./@emotion-BtrR-yrm.js";import"./stylis-DsJDcYJc.js";const z={class:"max-w-xl w-full rounded-lg"},D={class:"grid gap-4"},E={class:"grid gap-2"},N={class:"mt-4 text-center text-sm"},q=["href"],ge=w({__name:"cdkey",setup(K){const _=C(),c=p(""),f=p(""),u=p(!1),g=()=>{if(!_.isLogin)return l.warning("请先登录，再进行卡密兑换"),!1;let e=c.value;if(!e||!/^[a-zA-Z0-9]+$/.test(e)){l.warning("请输入正确的兑换码，您输入的兑换码类型有误！");return}b.confirm({title:"使用提醒：",content:"您确定使用该兑换码进行激活吗？该兑换码使用过后不可再次使用！",centered:!0,onOk:()=>{const r=window.VITE_API_BASE_URL;I.post(r+"/app/user/cdkeyus",{cdkcode:e}).then(i=>{const m=i.data.data;m.code==200?(_.fetchUserData(),l.success(m.msg,5),c.value=""):m.code===400&&l.error(m.msg)}).catch(i=>{console.log(i)})},onCancel:()=>(l.warning("您已取消兑换码使用，如需使用请提交兑换！"),!1),zIndex:99999999})};return h(async()=>{const e=M();if(await e.loadSettingsFromAPI(),f.value=String(e.getSetting("purchaseAddress")||""),e.getSetting("paymentSwitch")){const o=new URL(window.location.href).hostname,r=e.getSetting("domainAddress"),i=e.getSetting("navSwitchAll");o===r||i===!1?u.value=!0:u.value=!1}}),(e,o)=>(v(),k("div",z,[t(a(B),{class:"mx-auto max-w-sm md:w-[342px]"},{default:s(()=>[t(a(A),null,{default:s(()=>[t(a($),{class:"text-2xl"},{default:s(()=>[n(" 开始激活 ")]),_:1}),t(a(y),null,{default:s(()=>[n(" 在此输入您获得的激活码以激活您的帐户 ")]),_:1})]),_:1}),t(a(U),null,{default:s(()=>[d("div",D,[d("div",E,[t(a(P),{for:"email"},{default:s(()=>[n("输入激活码")]),_:1}),t(a(L),{id:"email",type:"email",modelValue:c.value,"onUpdate:modelValue":o[0]||(o[0]=r=>c.value=r),placeholder:"请输入CDK以兑换PLUS套餐",required:""},null,8,["modelValue"])]),t(a(V),{type:"submit",onClick:g,class:"w-full"},{default:s(()=>[n(" 激活您的账户 ")]),_:1})]),S(d("div",N,[n(" 没有激活码? "),d("a",{href:f.value,target:"_blank"}," 去购买 ",8,q)],512),[[x,u.value]])]),_:1})]),_:1})]))}});export{ge as default};
