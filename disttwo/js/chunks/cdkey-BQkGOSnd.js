import{u as g,_ as k,b as x,e as h,c as v,g as w,d as C,i as S}from"../index-CS5YVAQi.js";import{_ as $,a as V}from"./Label.vue_vue_type_script_setup_true_lang-D1cXxl5O.js";import{u as y}from"./useConfigStore-DcLyot55.js";import{a as o,M as U}from"./ant-design-vue-CyiF9e54.js";import{d as A,r as _,q as B,j as I,k as P,c as e,_ as s,u as t,ac as r,l}from"./@vue-Ca6oPw20.js";import"./pinia-B0xTW-XS.js";import"./vue-demi-Dq6ymT-8.js";import"./@vueuse-BnZciM7y.js";import"./axios-DTyqpfTh.js";import"./@multiavatar-dxrVjIoY.js";import"./crypto-js-l0AFIALE.js";import"./class-variance-authority-Bb4qSo10.js";import"./clsx-B-dksMZM.js";import"./tailwind-merge-BkWO730n.js";import"./radix-vue-B6u9mWk8.js";import"./@floating-ui-DW8MF69D.js";import"./@radix-icons--IQtXok_.js";import"./@iconify-DzGEP68A.js";import"./lucide-vue-next-BGOoG6k-.js";import"./@ant-design-C6rk-XVk.js";import"./@ctrl-DOFZgDuz.js";import"./vue-router-Dial6ibt.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./@babel-BiFW4_mA.js";import"./lodash-es-D9ej4-U1.js";import"./vue-types-C5fUfLeo.js";import"./dom-align-CRCehRfe.js";import"./@emotion-BtrR-yrm.js";import"./stylis-DsJDcYJc.js";const M={class:"max-w-xl w-full rounded-lg"},b={class:"grid gap-4"},z={class:"grid gap-2"},E={class:"mt-4 text-center text-sm"},L=["href"],ue=A({__name:"cdkey",setup(N){const p=g(),i=_(""),u=_(""),f=()=>{if(!p.isLogin)return o.warning("请先登录，再进行卡密兑换"),!1;let a=i.value;if(!a||!/^[a-zA-Z0-9]+$/.test(a)){o.warning("请输入正确的兑换码，您输入的兑换码类型有误！");return}U.confirm({title:"使用提醒：",content:"您确定使用该兑换码进行激活吗？该兑换码使用过后不可再次使用！",centered:!0,onOk:()=>{const m=window.VITE_API_BASE_URL;S.post(m+"/app/user/cdkeyus",{cdkcode:a}).then(d=>{const n=d.data.data;n.code==200?(p.fetchUserData(),o.success(n.msg,5),i.value=""):n.code===400&&o.error(n.msg)}).catch(d=>{console.log(d)})},onCancel:()=>(o.warning("您已取消兑换码使用，如需使用请提交兑换！"),!1),zIndex:99999999})};return B(async()=>{const a=y();await a.loadSettingsFromAPI(),u.value=String(a.getSetting("purchaseAddress")||"")}),(a,c)=>(I(),P("div",M,[e(t(C),{class:"mx-auto max-w-sm md:w-[342px]"},{default:s(()=>[e(t(k),null,{default:s(()=>[e(t(x),{class:"text-2xl"},{default:s(()=>[r(" 开始激活 ")]),_:1}),e(t(h),null,{default:s(()=>[r(" 在此输入您获得的激活码以激活您的帐户 ")]),_:1})]),_:1}),e(t(v),null,{default:s(()=>[l("div",b,[l("div",z,[e(t($),{for:"email"},{default:s(()=>[r("输入激活码")]),_:1}),e(t(V),{id:"email",type:"email",modelValue:i.value,"onUpdate:modelValue":c[0]||(c[0]=m=>i.value=m),placeholder:"请输入CDK以兑换PLUS套餐",required:""},null,8,["modelValue"])]),e(t(w),{type:"submit",onClick:f,class:"w-full"},{default:s(()=>[r(" 激活您的账户 ")]),_:1})]),l("div",E,[r(" 没有激活码? "),l("a",{href:u.value,target:"_blank"}," 去购买 ",8,L)])]),_:1})]),_:1})]))}});export{ue as default};
