import{d as X,r,b as V,q as Y,j as n,k as d,B as E,K as U,l,c as a,_ as c,u as t,ac as q,F as z,ab as F,Z as ee,a6 as w,a4 as se,aa as g}from"./@vue-Ca6oPw20.js";import{_ as te}from"./Skeleton.vue_vue_type_script_setup_true_lang-DiPI6E_0.js";import{u as ae,a as oe,_ as K,b as re,c as le,d as R,e as ne,i as ce,f as ie}from"../index-CZ3wx6ww.js";import{s as de}from"./pinia-B0xTW-XS.js";import{u as ue}from"./useConfigStore-BJP49b-x.js";import{d as pe}from"./lodash-es-D9ej4-U1.js";import{b as fe,c as me,A as ge,I as _e,G as ve,K as he}from"./lucide-vue-next-BGOoG6k-.js";import{P as be,a as i}from"./ant-design-vue-CyiF9e54.js";import"./@vueuse-BnZciM7y.js";import"./axios-DTyqpfTh.js";import"./@multiavatar-dxrVjIoY.js";import"./crypto-js-l0AFIALE.js";import"./class-variance-authority-Bb4qSo10.js";import"./clsx-B-dksMZM.js";import"./tailwind-merge-BkWO730n.js";import"./radix-vue-B6u9mWk8.js";import"./@floating-ui-DW8MF69D.js";import"./@radix-icons--IQtXok_.js";import"./@iconify-DzGEP68A.js";import"./@ant-design-C6rk-XVk.js";import"./@ctrl-DOFZgDuz.js";import"./vue-router-Dial6ibt.js";import"./vue-demi-Dq6ymT-8.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./@babel-BiFW4_mA.js";import"./vue-types-C5fUfLeo.js";import"./dom-align-CRCehRfe.js";import"./@emotion-BtrR-yrm.js";import"./stylis-DsJDcYJc.js";const ye={class:"chatbox"},we={class:"grid gap-3 xm:grid-cols-2 sm:grid-cols-3 md:grid-cols-5 lg:grid-cols-5 xl:grid-cols-5 2x:grid-cols-5 p-1"},xe={class:"space-y-2"},ke={class:"flex items-center justify-between"},Se={class:"space-y-2"},Ce={class:"text-sm font-bold"},Te={key:1,class:"title"},$e={key:2,class:"title"},Be={class:"pb-4 w-10/12 m-auto"},Pe={class:"grid gap-3 xm:grid-cols-2 sm:grid-cols-3 md:grid-cols-5 lg:grid-cols-5 xl:grid-cols-5 2x:grid-cols-5 p-1"},j="updatable",Ae=X({__name:"chatgptplus",setup(Ie){const u=ue(),x=r(!0),p=r([]),k=r(0),_=r(1),S=r(!1),C=r(!1),T=r(!1),$=r(""),B=r(!1),P=r(""),G=V(()=>_.value<k.value),H=V(()=>p.value.length>0),A=ae(),{useremail:De,userAvatar:Me,userToken:I,expireTime:Le,isPlus:O,isLogin:Ne,expired:Ve,daysBetween:Ee}=de(A),Z=oe(),{setActiveTab:b}=Z,D=async(s,o,e)=>{if(C.value){i.info("没有更多数据了");return}if(S.value=!0,_.value>1){const h=i.loading({content:"正在加载数据，请稍候...",key:j});setTimeout(h,0)}const v=window.VITE_API_BASE_URL,f=await ce.post(`${v}/app/box/liplus`,{type:s,page:o,size:e}),m=[];if(f.data&&f.data.data&&Array.isArray(f.data.data.list)?f.data.data.list.length===0&&b("istab"):b("istab"),o===1?p.value=m:m.length>0?(p.value=[...p.value,...m],setTimeout(()=>{i.success({content:"数据加载完成，网页下滑查看更多频道!",key:j,duration:2})},0)):(i.info("没有更多数据了"),C.value=!0),m.length>0){const h=m.reduce((L,N)=>N.statusinfo.count<L.statusinfo.count?N:L);P.value=h.carid}k.value=f.data.data.totalPages||0,x.value=!1},J=pe(()=>{const s=document.querySelector(".chatbox");s&&s.scrollTop+s.clientHeight>=s.scrollHeight-100&&G.value&&!S.value&&(_.value+=1,D("page",_.value,10))},300);Y(async()=>{D("page",1,43);const s=document.querySelector(".chatbox");s&&s.addEventListener("scroll",J),await u.loadSettingsFromAPI(),T.value=u.getSetting("car_name_enable")===!0,$.value=String(u.getSetting("car_plus_name_content")||""),B.value=u.getSetting("teamopen")!==void 0?u.getSetting("teamopen")===!0:!1});const y=r(null),Q=s=>{const o={border:"3px rgba(255, 0, 0, 0) solid",transition:"border-color 0.3s, box-shadow 0.3s",cursor:"pointer"};return y.value===s.id?{...o,border:`3px solid ${s.endpoint.labelColor}`,boxShadow:`1px 1px 10px ${s.endpoint.labelColor}`}:o},M=s=>{if(I.value===null){i.error("您还没有登录，请先登录"),b("login");return}if(!A.userplusstatus){i.warning("您的UserToken账户已过期，请续费");return}if(!O.value){i.error("您还不是Plus会员，请点击左侧开始激活 激活您的Plus权限");return}window.open(`/auth/logintoken?usertoken=${I.value}&carid=${s}`,"_blank")},W=s=>B.value&&/t/i.test(s);return(s,o)=>(n(),d("div",ye,[E(l("div",we,[a(t(R),{class:"card cardonline",onClick:o[0]||(o[0]=e=>M(P.value))},{default:c(()=>[a(t(K),{class:"grid pt-5 !pb-3 items-start gap-2 space-y-0"},{default:c(()=>[l("div",xe,[a(t(re),{class:"text-sm pt-2"},{default:c(()=>[q("极速：快速自动选择节点")]),_:1})])]),_:1}),a(t(le),{class:"pb-6 pt-3"},{default:c(()=>[l("div",ke,[a(t(fe),{class:"h-5 w-5",color:"#ab68ff",style:{"stroke-width":"2"}}),a(t(me),{class:"h-5 w-5",color:"#ab68ff",style:{"stroke-width":"2"}}),a(t(ge),{class:"h-5 w-5",color:"#ab68ff",style:{"stroke-width":"2"}}),a(t(_e),{class:"h-5 w-6",color:"#ab68ff",style:{"stroke-width":"2"}}),a(t(ve),{class:"h-5 w-6",color:"#ab68ff",style:{"stroke-width":"2"}}),a(t(he),{class:"h-5 w-6",color:"#ab68ff",style:{"stroke-width":"2"}})])]),_:1})]),_:1}),(n(!0),d(z,null,F(p.value,e=>(n(),ee(t(R),{key:e.carid,class:"card",onMouseover:v=>y.value=e.id,onMouseleave:o[1]||(o[1]=v=>y.value=null),style:w(Q(e)),onClick:v=>M(e.carid)},{default:c(()=>[a(t(K),{class:"grid pt-5 !pb-1.5 items-start p-5 gap-2 space-y-0"},{default:c(()=>[l("div",Se,[l("div",Ce,[W(e.remark)?(n(),d("span",{key:0,class:"tag",style:w([{backgroundColor:e.endpoint.labelColor},{background:"#2dd4bf"}])},"Team",4)):se("",!0),l("span",{class:"tag",style:w({backgroundColor:e.endpoint.labelColor})},g(e.endpoint.label||"NO"),5),T.value?(n(),d("span",Te,g($.value)+g(e.id),1)):(n(),d("span",$e,g(e.carid),1))]),a(t(ne),{class:"text-xs"},{default:c(()=>[q(" 实时状态："+g(e.endpoint.message),1)]),_:2},1024)])]),_:2},1024),l("div",Be,[a(t(be),{percent:e.statusinfo.percent,size:[0,8],steps:4,"show-info":!1,"stroke-color":e.endpoint.color,"trail-color":e.endpoint.labelColor},null,8,["percent","stroke-color","trail-color"])])]),_:2},1032,["onMouseover","style","onClick"]))),128))],512),[[U,H.value]]),E(l("div",Pe,[(n(),d(z,null,F(5,e=>l("div",{key:e,class:"space-y-2 gap-2"},[a(t(te),{class:"h-28"})])),64))],512),[[U,x.value]])]))}}),fs=ie(Ae,[["__scopeId","data-v-ad64c9d0"]]);export{fs as default};
