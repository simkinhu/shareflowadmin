import{d as ee,r,b as U,q as se,j as n,k as u,B as q,K as z,l,c as o,_ as c,u as t,ac as F,F as K,ab as R,Z as te,a6 as y,a4 as oe,aa as _}from"./@vue-Ca6oPw20.js";import{_ as ae}from"./Skeleton.vue_vue_type_script_setup_true_lang-C_bwAqhE.js";import{u as re,a as le,_ as j,b as ne,c as ce,d as G,e as ie,i as ue,f as de}from"../index-DxWyW2GX.js";import{s as pe}from"./pinia-B0xTW-XS.js";import{u as fe}from"./useConfigStore-CpPBDN50.js";import{d as me}from"./lodash-es-D9ej4-U1.js";import{b as _e,c as ge,A as ve,I as he,G as be,K as ye}from"./lucide-vue-next-BGOoG6k-.js";import{P as we,a as i}from"./ant-design-vue-CyiF9e54.js";import"./@vueuse-BnZciM7y.js";import"./axios-DTyqpfTh.js";import"./@multiavatar-dxrVjIoY.js";import"./crypto-js-l0AFIALE.js";import"./class-variance-authority-Bb4qSo10.js";import"./clsx-B-dksMZM.js";import"./tailwind-merge-BkWO730n.js";import"./radix-vue-B6u9mWk8.js";import"./@floating-ui-DW8MF69D.js";import"./@radix-icons--IQtXok_.js";import"./@iconify-DzGEP68A.js";import"./@ant-design-C6rk-XVk.js";import"./@ctrl-DOFZgDuz.js";import"./vue-router-Dial6ibt.js";import"./vue-demi-Dq6ymT-8.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./@babel-BiFW4_mA.js";import"./vue-types-C5fUfLeo.js";import"./dom-align-CRCehRfe.js";import"./@emotion-BtrR-yrm.js";import"./stylis-DsJDcYJc.js";const xe={class:"chatbox"},ke={class:"grid gap-3 xm:grid-cols-2 sm:grid-cols-3 md:grid-cols-5 lg:grid-cols-5 xl:grid-cols-5 2x:grid-cols-5 p-1"},Se={class:"space-y-2"},Ce={class:"flex items-center justify-between"},Te={class:"space-y-2"},$e={class:"text-sm font-bold"},Be={key:1,class:"title"},Pe={key:2,class:"title"},Ie={class:"pb-4 w-10/12 m-auto"},Ae={class:"grid gap-3 xm:grid-cols-2 sm:grid-cols-3 md:grid-cols-5 lg:grid-cols-5 xl:grid-cols-5 2x:grid-cols-5 p-1"},H="updatable",Me=ee({__name:"chatgptplus",setup(De){const d=fe(),w=r(!0),p=r([]),x=r(0),g=r(1),k=r(!1),S=r(!1),C=r(!1),T=r(""),$=r(!1),B=r(""),O=U(()=>g.value<x.value),Z=U(()=>p.value.length>0),P=re(),{useremail:Le,userAvatar:Ne,userToken:I,expireTime:Ve,isPlus:J,isLogin:Ee,expired:Ue,daysBetween:qe}=pe(P),Q=le(),{setActiveTab:A}=Q,M=async(s,a,e)=>{var L,N;if(S.value){i.info("没有更多数据了");return}if(k.value=!0,g.value>1){const b=i.loading({content:"正在加载数据，请稍候...",key:H});setTimeout(b,0)}const v=window.VITE_API_BASE_URL,f=await ue.post(`${v}/app/box/liplus`,{type:s,page:a,size:e}),m=[];if((N=(L=f==null?void 0:f.data)==null?void 0:L.data)!=null&&N.list)f.data.data.list;else{A("istab");return}if(a===1?p.value=m:m.length>0?(p.value=[...p.value,...m],setTimeout(()=>{i.success({content:"数据加载完成，网页下滑查看更多频道!",key:H,duration:2})},0)):(i.info("没有更多数据了"),S.value=!0),m.length>0){const b=m.reduce((V,E)=>E.statusinfo.count<V.statusinfo.count?E:V);B.value=b.carid}x.value=f.data.data.totalPages||0,w.value=!1},W=me(()=>{const s=document.querySelector(".chatbox");s&&s.scrollTop+s.clientHeight>=s.scrollHeight-100&&O.value&&!k.value&&(g.value+=1,M("page",g.value,10))},300);se(async()=>{M("page",1,43);const s=document.querySelector(".chatbox");s&&s.addEventListener("scroll",W),await d.loadSettingsFromAPI(),C.value=d.getSetting("car_name_enable")===!0,T.value=String(d.getSetting("car_plus_name_content")||""),$.value=d.getSetting("teamopen")!==void 0?d.getSetting("teamopen")===!0:!1});const h=r(null),X=s=>{const a={border:"3px rgba(255, 0, 0, 0) solid",transition:"border-color 0.3s, box-shadow 0.3s",cursor:"pointer"};return h.value===s.id?{...a,border:`3px solid ${s.endpoint.labelColor}`,boxShadow:`1px 1px 10px ${s.endpoint.labelColor}`}:a},D=s=>{if(I.value===null){i.error("您还没有登录，请先登录"),A("login");return}if(!P.userplusstatus){i.warning("您的UserToken账户已过期，请续费");return}if(!J.value){i.error("您还不是Plus会员，请点击左侧开始激活 激活您的Plus权限");return}window.open(`/auth/logintoken?usertoken=${I.value}&carid=${s}`,"_blank")},Y=s=>$.value&&/t/i.test(s);return(s,a)=>(n(),u("div",xe,[q(l("div",ke,[o(t(G),{class:"card cardonline",onClick:a[0]||(a[0]=e=>D(B.value))},{default:c(()=>[o(t(j),{class:"grid pt-5 !pb-3 items-start gap-2 space-y-0"},{default:c(()=>[l("div",Se,[o(t(ne),{class:"text-sm pt-2"},{default:c(()=>[F("极速：快速自动选择节点")]),_:1})])]),_:1}),o(t(ce),{class:"pb-6 pt-3"},{default:c(()=>[l("div",Ce,[o(t(_e),{class:"h-5 w-5",color:"#ab68ff",style:{"stroke-width":"2"}}),o(t(ge),{class:"h-5 w-5",color:"#ab68ff",style:{"stroke-width":"2"}}),o(t(ve),{class:"h-5 w-5",color:"#ab68ff",style:{"stroke-width":"2"}}),o(t(he),{class:"h-5 w-6",color:"#ab68ff",style:{"stroke-width":"2"}}),o(t(be),{class:"h-5 w-6",color:"#ab68ff",style:{"stroke-width":"2"}}),o(t(ye),{class:"h-5 w-6",color:"#ab68ff",style:{"stroke-width":"2"}})])]),_:1})]),_:1}),(n(!0),u(K,null,R(p.value,e=>(n(),te(t(G),{key:e.carid,class:"card",onMouseover:v=>h.value=e.id,onMouseleave:a[1]||(a[1]=v=>h.value=null),style:y(X(e)),onClick:v=>D(e.carid)},{default:c(()=>[o(t(j),{class:"grid pt-5 !pb-1.5 items-start p-5 gap-2 space-y-0"},{default:c(()=>[l("div",Te,[l("div",$e,[Y(e.remark)?(n(),u("span",{key:0,class:"tag",style:y([{backgroundColor:e.endpoint.labelColor},{background:"#2dd4bf"}])},"Team",4)):oe("",!0),l("span",{class:"tag",style:y({backgroundColor:e.endpoint.labelColor})},_(e.endpoint.label||"NO"),5),C.value?(n(),u("span",Be,_(T.value)+_(e.id),1)):(n(),u("span",Pe,_(e.carid),1))]),o(t(ie),{class:"text-xs"},{default:c(()=>[F(" 实时状态："+_(e.endpoint.message),1)]),_:2},1024)])]),_:2},1024),l("div",Ie,[o(t(we),{percent:e.statusinfo.percent,size:[0,8],steps:4,"show-info":!1,"stroke-color":e.endpoint.color,"trail-color":e.endpoint.labelColor},null,8,["percent","stroke-color","trail-color"])])]),_:2},1032,["onMouseover","style","onClick"]))),128))],512),[[z,Z.value]]),q(l("div",Ae,[(n(),u(K,null,R(5,e=>l("div",{key:e,class:"space-y-2 gap-2"},[o(t(ae),{class:"h-28"})])),64))],512),[[z,w.value]])]))}}),_s=de(Me,[["__scopeId","data-v-0da3cd08"]]);export{_s as default};
