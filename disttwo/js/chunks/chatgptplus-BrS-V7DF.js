import{d as X,r,b as N,q as Y,j as c,k as d,B as V,K as q,l,c as o,_ as i,u as t,ac as E,F as R,ab as U,Z as ee,a6 as y,a4 as se,aa as _}from"./@vue-Ca6oPw20.js";import{_ as te}from"./Skeleton.vue_vue_type_script_setup_true_lang-C6fw6OdK.js";import{u as oe,a as ae,_ as z,b as re,c as le,d as F,e as ne,i as ce,f as ie}from"../index-CS5YVAQi.js";import{s as ue}from"./pinia-B0xTW-XS.js";import{u as de}from"./useConfigStore-DcLyot55.js";import{d as pe}from"./lodash-es-D9ej4-U1.js";import{b as fe,c as me,A as _e,I as ge,G as ve,K as he}from"./lucide-vue-next-BGOoG6k-.js";import{P as be,a as n}from"./ant-design-vue-CyiF9e54.js";import"./@vueuse-BnZciM7y.js";import"./axios-DTyqpfTh.js";import"./@multiavatar-dxrVjIoY.js";import"./crypto-js-l0AFIALE.js";import"./class-variance-authority-Bb4qSo10.js";import"./clsx-B-dksMZM.js";import"./tailwind-merge-BkWO730n.js";import"./radix-vue-B6u9mWk8.js";import"./@floating-ui-DW8MF69D.js";import"./@radix-icons--IQtXok_.js";import"./@iconify-DzGEP68A.js";import"./@ant-design-C6rk-XVk.js";import"./@ctrl-DOFZgDuz.js";import"./vue-router-Dial6ibt.js";import"./vue-demi-Dq6ymT-8.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./@babel-BiFW4_mA.js";import"./vue-types-C5fUfLeo.js";import"./dom-align-CRCehRfe.js";import"./@emotion-BtrR-yrm.js";import"./stylis-DsJDcYJc.js";const ye={class:"chatbox"},we={class:"grid gap-3 xm:grid-cols-2 sm:grid-cols-3 md:grid-cols-5 lg:grid-cols-5 xl:grid-cols-5 2x:grid-cols-5 p-1"},xe={class:"space-y-2"},ke={class:"flex items-center justify-between"},Se={class:"space-y-2"},Ce={class:"text-sm font-bold"},Te={key:1,class:"title"},$e={key:2,class:"title"},Be={class:"pb-4 w-10/12 m-auto"},Pe={class:"grid gap-3 xm:grid-cols-2 sm:grid-cols-3 md:grid-cols-5 lg:grid-cols-5 xl:grid-cols-5 2x:grid-cols-5 p-1"},K="updatable",Ie=X({__name:"chatgptplus",setup(Ae){const p=de(),w=r(!0),f=r([]),x=r(0),g=r(1),v=r(!1),k=r(!1),S=r(!1),C=r(""),T=r(!1),$=r(""),j=N(()=>g.value<x.value),G=N(()=>f.value.length>0),B=oe(),{useremail:Me,userAvatar:De,userToken:P,expireTime:Le,isPlus:H,isLogin:Ne,expired:Ve,daysBetween:qe}=ue(B),O=ae(),{setActiveTab:Z}=O,I=async(s,a,e)=>{if(k.value){n.info("没有更多数据了");return}v.value=!0;try{if(g.value>1){const b=n.loading({content:"正在加载数据，请稍候...",key:K});setTimeout(b,0)}const u=window.VITE_API_BASE_URL,M=await ce.post(`${u}/app/box/liplus`,{type:s,page:a,size:e}),m=M.data.data.list||[];if(a===1?f.value=m:m.length>0?(f.value=[...f.value,...m],setTimeout(()=>{n.success({content:"数据加载完成，网页下滑查看更多频道!",key:K,duration:2})},0)):(n.info("没有更多数据了"),k.value=!0),m.length>0){const b=m.reduce((D,L)=>L.statusinfo.count<D.statusinfo.count?L:D);$.value=b.carid}x.value=M.data.data.totalPages||0,w.value=!1}catch(u){console.error("Request error:",u),n.error("加载数据失败，请稍后重试")}finally{v.value=!1}},J=pe(()=>{const s=document.querySelector(".chatbox");s&&s.scrollTop+s.clientHeight>=s.scrollHeight-100&&j.value&&!v.value&&(g.value+=1,I("page",g.value,10))},300);Y(async()=>{I("page",1,43);const s=document.querySelector(".chatbox");s&&s.addEventListener("scroll",J),await p.loadSettingsFromAPI(),S.value=p.getSetting("car_name_enable")===!0,C.value=String(p.getSetting("car_plus_name_content")||""),T.value=p.getSetting("teamopen")!==void 0?p.getSetting("teamopen")===!0:!1});const h=r(null),Q=s=>{const a={border:"3px rgba(255, 0, 0, 0) solid",transition:"border-color 0.3s, box-shadow 0.3s",cursor:"pointer"};return h.value===s.id?{...a,border:`3px solid ${s.endpoint.labelColor}`,boxShadow:`1px 1px 10px ${s.endpoint.labelColor}`}:a},A=s=>{if(P.value===null){n.error("您还没有登录，请先登录"),Z("login");return}if(!B.userplusstatus){n.warning("您的UserToken账户已过期，请续费");return}if(!H.value){n.error("您还不是Plus会员，请点击左侧开始激活 激活您的Plus权限");return}window.open(`/auth/logintoken?usertoken=${P.value}&carid=${s}`,"_blank")},W=s=>T.value&&/t/i.test(s);return(s,a)=>(c(),d("div",ye,[V(l("div",we,[o(t(F),{class:"card cardonline",onClick:a[0]||(a[0]=e=>A($.value))},{default:i(()=>[o(t(z),{class:"grid pt-5 !pb-3 items-start gap-2 space-y-0"},{default:i(()=>[l("div",xe,[o(t(re),{class:"text-sm pt-2"},{default:i(()=>[E("极速：快速自动选择节点")]),_:1})])]),_:1}),o(t(le),{class:"pb-4 pt-3"},{default:i(()=>[l("div",ke,[o(t(fe),{class:"h-5 w-5",color:"#ab68ff",style:{"stroke-width":"2"}}),o(t(me),{class:"h-5 w-5",color:"#ab68ff",style:{"stroke-width":"2"}}),o(t(_e),{class:"h-5 w-5",color:"#ab68ff",style:{"stroke-width":"2"}}),o(t(ge),{class:"h-5 w-6",color:"#ab68ff",style:{"stroke-width":"2"}}),o(t(ve),{class:"h-5 w-6",color:"#ab68ff",style:{"stroke-width":"2"}}),o(t(he),{class:"h-5 w-6",color:"#ab68ff",style:{"stroke-width":"2"}})])]),_:1})]),_:1}),(c(!0),d(R,null,U(f.value,e=>(c(),ee(t(F),{key:e.carid,class:"card",onMouseover:u=>h.value=e.id,onMouseleave:a[1]||(a[1]=u=>h.value=null),style:y(Q(e)),onClick:u=>A(e.carid)},{default:i(()=>[o(t(z),{class:"grid pt-5 !pb-1.5 items-start p-5 gap-2 space-y-0"},{default:i(()=>[l("div",Se,[l("div",Ce,[W(e.remark)?(c(),d("span",{key:0,class:"tag",style:y([{backgroundColor:e.endpoint.labelColor},{background:"#2dd4bf"}])},"Team",4)):se("",!0),l("span",{class:"tag",style:y({backgroundColor:e.endpoint.labelColor})},_(e.endpoint.label||"NO"),5),S.value?(c(),d("span",Te,_(C.value)+_(e.id),1)):(c(),d("span",$e,_(e.carid),1))]),o(t(ne),{class:"text-xs"},{default:i(()=>[E(" 实时状态："+_(e.endpoint.message),1)]),_:2},1024)])]),_:2},1024),l("div",Be,[o(t(be),{percent:e.statusinfo.percent,size:[0,8],steps:4,"show-info":!1,"stroke-color":e.endpoint.color,"trail-color":e.endpoint.labelColor},null,8,["percent","stroke-color","trail-color"])])]),_:2},1032,["onMouseover","style","onClick"]))),128))],512),[[q,G.value]]),V(l("div",Pe,[(c(),d(R,null,U(5,e=>l("div",{key:e,class:"space-y-2 gap-2"},[o(t(te),{class:"h-28"})])),64))],512),[[q,w.value]])]))}}),fs=ie(Ie,[["__scopeId","data-v-e88b9ae6"]]);export{fs as default};
