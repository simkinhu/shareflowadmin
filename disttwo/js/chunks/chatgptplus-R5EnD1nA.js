import{d as W,r,b as N,q as X,j as c,k as p,B as V,K as q,l,c as o,_ as i,u as t,ac as E,F as R,ab as U,Z as Y,a6 as b,a4 as ee,aa as g}from"./@vue-Ca6oPw20.js";import{_ as se}from"./Skeleton.vue_vue_type_script_setup_true_lang-Cc_MJK1D.js";import{u as te,a as oe,_ as z,b as ae,c as re,d as F,e as le,i as ne,f as ce}from"../index-DZnlxAyB.js";import{s as ie}from"./pinia-B0xTW-XS.js";import{u as ue}from"./useConfigStore-D7BIT4qR.js";import{d as de}from"./lodash-es-D9ej4-U1.js";import{b as pe,c as fe,A as me,I as ge,G as _e,K as ve}from"./lucide-vue-next-BGOoG6k-.js";import{P as he,a as n}from"./ant-design-vue-CyiF9e54.js";import"./@vueuse-BnZciM7y.js";import"./axios-DTyqpfTh.js";import"./@multiavatar-dxrVjIoY.js";import"./crypto-js-l0AFIALE.js";import"./class-variance-authority-Bb4qSo10.js";import"./clsx-B-dksMZM.js";import"./tailwind-merge-BkWO730n.js";import"./radix-vue-B6u9mWk8.js";import"./@floating-ui-DW8MF69D.js";import"./@radix-icons--IQtXok_.js";import"./@iconify-DzGEP68A.js";import"./@ant-design-C6rk-XVk.js";import"./@ctrl-DOFZgDuz.js";import"./vue-router-Dial6ibt.js";import"./vue-demi-Dq6ymT-8.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./@babel-BiFW4_mA.js";import"./vue-types-C5fUfLeo.js";import"./dom-align-CRCehRfe.js";import"./@emotion-BtrR-yrm.js";import"./stylis-DsJDcYJc.js";const be={class:"chatbox"},ye={class:"grid gap-3 xm:grid-cols-2 sm:grid-cols-3 md:grid-cols-5 lg:grid-cols-5 xl:grid-cols-5 2x:grid-cols-5 p-1"},we={class:"space-y-2"},ke={class:"flex items-center justify-between"},xe={class:"space-y-2"},Se={class:"text-sm font-bold"},Ce={key:1,class:"title"},$e={key:2,class:"title"},Te={class:"pb-4 w-10/12 m-auto"},Be={class:"grid gap-3 xm:grid-cols-2 sm:grid-cols-3 md:grid-cols-5 lg:grid-cols-5 xl:grid-cols-5 2x:grid-cols-5 p-1"},Pe=W({__name:"chatgptplus",setup(Me){const f=ue(),y=r(!0),m=r([]),w=r(0),_=r(1),v=r(!1),k=r(!1),x=r(!1),S=r(""),C=r(!1),$=r(""),K=N(()=>_.value<w.value),j=N(()=>m.value.length>0),T=te(),{useremail:Ie,userAvatar:Ae,userToken:B,expireTime:De,isPlus:G,isLogin:Le,expired:Ne,daysBetween:Ve}=ie(T),H=oe(),{setActiveTab:P}=H,M=async(s,a,e)=>{if(k.value){n.info("没有更多数据了");return}v.value=!0;try{_.value>1&&n.loading({content:"正在加载数据，请稍候...",key:"loadingMessage"});const u=window.VITE_API_BASE_URL,A=await ne.post(`${u}/app/box/liplus`,{type:s,page:a,size:e}),d=A.data.data.list||[];if(d.length===0&&P("istab"),a===1?m.value=d:d.length>0?(m.value=[...m.value,...d],n.success({content:"数据加载完成，网页下滑查看更多频道!",key:"loadingMessage",duration:2})):(n.info("没有更多数据了"),k.value=!0),d.length>0){const Q=d.reduce((D,L)=>L.statusinfo.count<D.statusinfo.count?L:D);$.value=Q.carid}w.value=A.data.data.totalPages||0,y.value=!1}catch(u){console.error("Request error:",u),n.error("加载数据失败，请稍后重试")}finally{v.value=!1}},O=de(()=>{const s=document.querySelector(".chatbox");s&&s.scrollTop+s.clientHeight>=s.scrollHeight-100&&K.value&&!v.value&&(_.value+=1,M("page",_.value,10))},300);X(async()=>{M("page",1,43);const s=document.querySelector(".chatbox");s&&s.addEventListener("scroll",O),await f.loadSettingsFromAPI(),x.value=f.getSetting("car_name_enable")===!0,S.value=String(f.getSetting("car_plus_name_content")||""),C.value=f.getSetting("teamopen")!==void 0?f.getSetting("teamopen")===!0:!1});const h=r(null),Z=s=>{const a={border:"3px rgba(255, 0, 0, 0) solid",transition:"border-color 0.3s, box-shadow 0.3s",cursor:"pointer"};return h.value===s.id?{...a,border:`3px solid ${s.endpoint.labelColor}`,boxShadow:`1px 1px 10px ${s.endpoint.labelColor}`}:a},I=s=>{if(B.value===null){n.error("您还没有登录，请先登录"),P("login");return}if(!T.userplusstatus){n.warning("您的UserToken账户已过期，请续费");return}if(!G.value){n.error("您还不是Plus会员，请点击左侧开始激活 激活您的Plus权限");return}window.open(`/auth/logintoken?usertoken=${B.value}&carid=${s}`,"_blank")},J=s=>C.value&&/t/i.test(s);return(s,a)=>(c(),p("div",be,[V(l("div",ye,[o(t(F),{class:"card cardonline",onClick:a[0]||(a[0]=e=>I($.value))},{default:i(()=>[o(t(z),{class:"grid pt-5 !pb-3 items-start gap-2 space-y-0"},{default:i(()=>[l("div",we,[o(t(ae),{class:"text-sm pt-2"},{default:i(()=>[E("极速：快速自动选择节点")]),_:1})])]),_:1}),o(t(re),{class:"pb-6 pt-3"},{default:i(()=>[l("div",ke,[o(t(pe),{class:"h-5 w-5",color:"#ab68ff",style:{"stroke-width":"2"}}),o(t(fe),{class:"h-5 w-5",color:"#ab68ff",style:{"stroke-width":"2"}}),o(t(me),{class:"h-5 w-5",color:"#ab68ff",style:{"stroke-width":"2"}}),o(t(ge),{class:"h-5 w-6",color:"#ab68ff",style:{"stroke-width":"2"}}),o(t(_e),{class:"h-5 w-6",color:"#ab68ff",style:{"stroke-width":"2"}}),o(t(ve),{class:"h-5 w-6",color:"#ab68ff",style:{"stroke-width":"2"}})])]),_:1})]),_:1}),(c(!0),p(R,null,U(m.value,e=>(c(),Y(t(F),{key:e.carid,class:"card",onMouseover:u=>h.value=e.id,onMouseleave:a[1]||(a[1]=u=>h.value=null),style:b(Z(e)),onClick:u=>I(e.carid)},{default:i(()=>[o(t(z),{class:"grid pt-5 !pb-1.5 items-start p-5 gap-2 space-y-0"},{default:i(()=>[l("div",xe,[l("div",Se,[J(e.remark)?(c(),p("span",{key:0,class:"tag",style:b([{backgroundColor:e.endpoint.labelColor},{background:"#2dd4bf"}])},"Team",4)):ee("",!0),l("span",{class:"tag",style:b({backgroundColor:e.endpoint.labelColor})},g(e.endpoint.label||"NO"),5),x.value?(c(),p("span",Ce,g(S.value)+g(e.id),1)):(c(),p("span",$e,g(e.carid),1))]),o(t(le),{class:"text-xs"},{default:i(()=>[E(" 实时状态："+g(e.endpoint.message),1)]),_:2},1024)])]),_:2},1024),l("div",Te,[o(t(he),{percent:e.statusinfo.percent,size:[0,8],steps:4,"show-info":!1,"stroke-color":e.endpoint.color,"trail-color":e.endpoint.labelColor},null,8,["percent","stroke-color","trail-color"])])]),_:2},1032,["onMouseover","style","onClick"]))),128))],512),[[q,j.value]]),V(l("div",Be,[(c(),p(R,null,U(5,e=>l("div",{key:e,class:"space-y-2 gap-2"},[o(t(se),{class:"h-28"})])),64))],512),[[q,y.value]])]))}}),ps=ce(Pe,[["__scopeId","data-v-39f9a85e"]]);export{ps as default};
