import{a as T}from"./axios-fa38e072.js";import"./usershare-2e0a7c3f.js";import{_ as I}from"./BaseBreadcrumb.vue_vue_type_style_index_0_lang-50d1b805.js";import{v as A,k as H,q as S,H as E,o as U,l as z,z as F,i as j,E as q,D as g}from"./vuetify-3df09d96.js";import{d as k,r,W as l,_ as f,$ as o,u,Z as h,a2 as x,c as a,Y as t,X as y,F as V,G as w,a4 as $,j as C,o as G,a5 as P,a3 as v}from"./@vue-c9a03ce3.js";import{m as R}from"./@multiavatar-b28f2a65.js";import{f as W}from"./date-fns-8e15a9c0.js";import{_ as X}from"./_plugin-vue_export-helper-c27b6911.js";import"./pinia-2f8cef2e.js";import"./vue-demi-71ba0ef2.js";import"./crypto-js-74ece96e.js";import"./ant-design-vue-a7ef973d.js";import"./@babel-86619d60.js";import"./@ant-design-32a4e489.js";import"./@ctrl-044b369f.js";import"./resize-observer-polyfill-0f9f8adb.js";import"./@emotion-f7664732.js";import"./stylis-5efc5547.js";import"./scroll-into-view-if-needed-6b992d05.js";import"./compute-scroll-into-view-183f845a.js";import"./vue-types-ef06c517.js";import"./dom-align-529d0cdc.js";import"./lodash-es-5af3e9d7.js";import"./dayjs-c0c7802c.js";import"./async-validator-dee29e8b.js";import"./throttle-debounce-87e7e444.js";import"./ChatBc-abd90dc1.js";const Y={class:"d-flex mainbox"},Z={key:0,class:"left-part"},J={class:"right-part"},K=w(" Menu "),O=k({setup(L){const{xs:b,lgAndUp:_}=A(),i=r(!1);return(s,n)=>{const e=$("Menu2Icon");return l(),f(V,null,[o("div",Y,[u(_)?(l(),f("div",Z,[h(s.$slots,"leftpart")])):x("",!0),o("div",J,[a(H,{block:"",onClick:n[0]||(n[0]=d=>i.value=!i.value),variant:"text",class:"d-lg-none d-md-flex d-sm-flex"},{default:t(()=>[a(e,{size:"20",class:"mr-2"}),K]),_:1}),a(S,{class:"d-lg-none d-block"}),h(s.$slots,"rightpart")])]),u(_)?x("",!0):(l(),y(U,{key:0,temporary:"",modelValue:i.value,"onUpdate:modelValue":n[1]||(n[1]=d=>i.value=d),width:"320",top:""},{default:t(()=>[a(E,{class:"pa-0"},{default:t(()=>[h(s.$slots,"mobileLeftContent")]),_:3})]),_:3},8,["modelValue"]))],64)}}});const Q={class:"pa-6"},tt={class:"text-h6 text-truncate"},et={class:"d-flex mt-3 align-center"},at={class:"text-subtitle-2 opacity-25"},ot=["innerHTML"],st={class:"text-h4 text-13"},nt={class:"pa-6"},rt=["innerHTML"],lt=k({setup(L){const b=r({title:"系统公告"}),_=r([{text:"系统主页",disabled:!1,href:"/"},{text:"系统公告",disabled:!0,href:"/user/notice"}]),i=R("root"),s=r([]),n=r(0),e=r(null),d=r(""),M=async()=>{const c=window.VITE_API_BASE_URL;try{const p=await T.post(c+"/app/share/notification");s.value=p.data.data,n.value=s.value.length,n.value>0&&(e.value=s.value[0])}catch(p){console.error("请求错误:",p)}},D=c=>{e.value=c};C(()=>e.value?e.value.notice_content:"");const N=C(()=>d.value?s.value.filter(c=>c.notice_title.toLowerCase().includes(d.value.toLowerCase())):s.value);return G(()=>{M()}),(c,p)=>{const B=$("a-divider");return l(),f(V,null,[a(I,{title:b.value.title,breadcrumbs:_.value},null,8,["title","breadcrumbs"]),a(g,{elevation:"10"},{default:t(()=>[a(O,null,{leftpart:t(()=>[o("div",Q,[(l(!0),f(V,null,P(u(N),m=>(l(),y(z,{class:"note-sheet pa-5 pb-4 rounded-md cursor-pointer mb-4",key:m.notice_id,onClick:it=>D(m)},{default:t(()=>[o("h6",tt,v(m.notice_title),1),o("div",et,[o("small",at,v(new Date(m.create_time).toLocaleDateString()),1)])]),_:2},1032,["onClick"]))),128))])]),rightpart:t(()=>[a(F,{cols:"12"},{default:t(()=>[e.value?(l(),y(g,{key:0,elevation:"10",class:"mt-5",rounded:"md"},{default:t(()=>[a(j,{size:"40",class:"mt-n7 mx-6"},{default:t(()=>[o("div",{innerHTML:u(i),style:{width:"50px"}},null,8,ot)]),_:1}),a(q,{class:"pb-0"},{default:t(()=>[o("h1",st,v(e.value.notice_title),1)]),_:1}),a(B,{orientation:"right"},{default:t(()=>[w(v(e.value?u(W)(new Date(e.value.update_time),"yyyy-MM-dd"):""),1)]),_:1}),o("div",nt,[o("div",{class:"notice-content",innerHTML:e.value.notice_content},null,8,rt)])]),_:1})):x("",!0)]),_:1})]),_:1})]),_:1})],64)}}});const St=X(lt,[["__scopeId","data-v-57ae4a95"]]);export{St as default};
