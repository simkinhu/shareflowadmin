import{d as s}from"./pinia-2f8cef2e.js";import{a as r}from"./axios-fa38e072.js";import{m as i}from"./ant-design-vue-a7ef973d.js";const l=s({id:"customizer",state:()=>({Sidebar_drawer:null,Customizer_drawer:!1,mini_sidebar:!1,setHorizontalLayout:!0,setRTLLayout:!1,actTheme:"BLUE_THEME",boxed:!0,setBorderCard:!1,noticeisenable:!0,notices:""}),actions:{loadSettingsFromLocalStorage(){["setHorizontalLayout","customizerRTLLayout","customizerTheme","customizerHorizontalLayout","customizerMiniSidebar","customizerBoxed","customizerBorderCard"].forEach(o=>{const a=localStorage.getItem(o);if(a!==null)switch(o){case"setHorizontalLayout":case"customizerHorizontalLayout":this.setHorizontalLayout=a==="true";break;case"customizerRTLLayout":this.setRTLLayout=a==="true";break;case"customizerTheme":this.actTheme=a;break;case"customizerMiniSidebar":this.mini_sidebar=a==="true";break;case"customizerBoxed":this.boxed=a==="true";break;case"customizerBorderCard":this.setBorderCard=a==="true";break}})},saveSettingsToLocalStorage(){localStorage.setItem("setHorizontalLayout",String(this.setHorizontalLayout)),localStorage.setItem("customizerTheme",this.actTheme),localStorage.setItem("customizerRTLLayout",String(this.setRTLLayout)),localStorage.setItem("customizerHorizontalLayout",String(this.setHorizontalLayout)),localStorage.setItem("customizerMiniSidebar",String(this.mini_sidebar)),localStorage.setItem("customizerBoxed",String(this.boxed)),localStorage.setItem("customizerBorderCard",String(this.setBorderCard))},async loadSettingsFromAPI(){try{const e=window.VITE_API_BASE_URL,o=await r.post(`${e}/app/share/theme`);o.data.code===1&&o.data.data.shareset.forEach(t=>{switch(t.config_key){case"setHorizontalLayout":this.setHorizontalLayout=t.config_value==="1";break;case"setRTLLayout":this.setRTLLayout=t.config_value==="1";break;case"actTheme":this.actTheme=t.config_value;break;case"mini_sidebar":this.mini_sidebar=t.config_value==="1";break;case"boxed":this.boxed=t.config_value==="1";break;case"setBorderCard":this.setBorderCard=t.config_value==="1";break;case"isannoun":this.noticeisenable=t.config_value;break;case"isannoun_content":this.notices=t.config_value;break}})}catch(e){i.warning("主题配置接口请求错误，请检查接口地址是否正确！"),console.error("Unable to load custom settings from API",e)}},SET_SIDEBAR_DRAWER(){this.Sidebar_drawer=!this.Sidebar_drawer,this.saveSettingsToLocalStorage()},SET_MINI_SIDEBAR(e){this.mini_sidebar=e,this.saveSettingsToLocalStorage()},SET_CUSTOMIZER_DRAWER(e){this.Customizer_drawer=e,this.saveSettingsToLocalStorage()},SET_LAYOUT(e){this.setHorizontalLayout=e,this.saveSettingsToLocalStorage()},SET_THEME(e){this.actTheme=e,this.saveSettingsToLocalStorage()},SET_CARD_BORDER(e){this.setBorderCard=e,this.saveSettingsToLocalStorage()}}});export{l as u};
