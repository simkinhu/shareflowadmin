import{u as q,i as K}from"../index-667cffb9.js";import{u as X}from"./userShare-38bca1c3.js";import{s as Y}from"./pinia-98ec2995.js";import{_ as Z,a as tt}from"./welcome-bg-bd0823d3.js";import{R as et,l as st}from"./Password.vue_vue_type_script_lang-0717ec85.js";import{a6 as lt,a7 as at,a8 as ot,m as it,a9 as nt,h as ut}from"./@ant-design-bd925dbd.js";import{m as b,M as rt}from"./ant-design-vue-6548dd29.js";import{d as dt,r as c,o as ct,h as N,aJ as i,a6 as d,bl as e,c as s,a9 as l,a8 as u,G as n,b2 as r,a7 as h,aQ as $,F as I,aS as p,aC as H,aE as W}from"./@vue-7e44e6dd.js";import{_ as pt}from"./ChatBc-abd90dc1.js";import{_ as _t}from"./_plugin-vue_export-helper-c27b6911.js";import{w as f,A as J,B as U,b as S,m as ht,C as R,p as mt,l as v,D as gt,E as j,n as Q,F as ft,G as vt,H as G}from"./vuetify-e7ea846c.js";import"./vue-router-0e41780a.js";import"./dayjs-869360bd.js";import"./@multiavatar-7283d2b3.js";import"./axios-6f43ddff.js";/* empty css             */import"./vue3-apexcharts-fb146ff1.js";import"./vue-fdaf27ce.js";import"./apexcharts-a35677a7.js";import"./core-js-40ace11a.js";import"./vue-demi-71ba0ef2.js";import"./@babel-8a290753.js";import"./@ctrl-044b369f.js";import"./resize-observer-polyfill-3d106987.js";import"./@emotion-f7664732.js";import"./stylis-5efc5547.js";import"./scroll-into-view-if-needed-6b992d05.js";import"./compute-scroll-into-view-183f845a.js";import"./vue-types-ef06c517.js";import"./dom-align-529d0cdc.js";import"./lodash-es-5af3e9d7.js";import"./async-validator-dee29e8b.js";import"./throttle-debounce-87e7e444.js";import"./crypto-js-3b32aad8.js";import"./loginChat.vue_vue_type_style_index_0_lang-4eab4381.js";const bt=dt({components:{Regist:et,Usercout:Z,loginChat:st,ApiOutlined:lt,ThunderboltOutlined:at,TrophyOutlined:ot,SwapRightOutlined:it,SwapLeftOutlined:nt},setup(){const t=X(),o=q(),{useremail:g,userToken:y,userAvatar:_,expireTime:P,isPlus:m,isLogin:k,expired:M,daysBetween:z}=Y(t),O=c(""),L=c(""),T=c(!0),F=c(!1),x=c(""),A=c(!1),C=c(!1),D=c(""),E=c(""),B=c(!1),w=c(""),a=c(""),V=c([]);return ct(async()=>{await o.loadSettingsFromAPI(),O.value=String(o.getSetting("siteTitle")||""),L.value=String(o.getSetting("siteDescription")||""),T.value=o.getSetting("isbanner")!==void 0?o.getSetting("isbanner")===!0:!1,F.value=o.getSetting("isannoun")!==void 0?o.getSetting("isannoun")===!0:!1,A.value=o.getSetting("teamopen")!==void 0?o.getSetting("teamopen")===!0:!1,x.value=String(o.getSetting("isannoun_content")||""),C.value=o.getSetting("car_name_enable")===!0,D.value=String(o.getSetting("car_plus_name_content")||""),E.value=String(o.getSetting("car_gpt_name_content")||""),B.value=o.getSetting("tab_url_enable")===!0,w.value=String(o.getSetting("tab_url_name")||""),a.value=String(o.getSetting("tab_url_content")||""),V.value=o.bannerList}),{siteTitle:O,isbanner:T,isannoun:F,isannoun_content:x,teamopen:A,car_name_enable:C,car_plus_name_content:D,car_gpt_name_content:E,tab_url_enable:B,tab_url_name:w,tab_url_content:a,userStore:t,outlogin:()=>{rt.confirm({zIndex:99999,centered:!0,title:"提示？",icon:N(ut),content:N("div",{style:"color:red;"},"你确定退出登录吗？"),onOk(){t.logout(),b.success("已退出登录，如需再次使用请重新登录")},onCancel(){b.warning("您取消了退出！")}})},userToken:y,useremail:g,userAvatar:_,expireTime:P,isPlus:m,isLogin:k,expired:M,daysBetween:z,bannerList:V}},data(){return{activeTab:c("isplus"),userToken:c(null),segmented:{content:"soft",footer:"soft"},currentDate:new Date().toISOString().split("T")[0],pluslist:[],islist:[],notice:"",plustotal:0,istotal:0,ispage:1,pluspage:1,plushasMoreData:!0,ishasMoreData:!0,plusTotalPages:1,isTotalPages:1,pageSize:36,showgpt:"isplus",noticeisenable:!1,showOverlay:!0,loadingplus:!0,loadinggpt:!0}},created(){this.fetchAllData()},methods:{shouldShowTeam(t){return this.teamopen&&/t/i.test(t)},hideOverlay(){this.showOverlay=!1},goToSite(){let t=this.tab_url_content;window.open(t,"_blank")},clicktab(t){t==="isgpt"?this.showgpt="isgpt":t==="isplus"?this.showgpt="isplus":this.showgpt=""},toggleModal(){this.userStore.loginModal=!0},regtoggleModal(){this.userStore.registModel=!0},plusredirectTo(t){const o=this.userToken;if(console.log(this.userStore.userplusstatus),o===null){b.error("您还没有登录，请先登录"),this.userStore.loginModal=!0;return}else if(this.userStore.userplusstatus)if(this.isPlus)window.open(`/auth/logintoken?usertoken=${o}&carid=${t}`,"_blank");else{b.error("您还不是Plus会员，请在线开通Plus会员专属频道权限");return}else{b.warning("您的UserToken账户已过期，请续费");return}},isredirectTo(t){const o=this.userToken,g=new Date(this.expireTime),y=new Date;if(o===null){b.warning("您还没有登录，请先登录"),this.userStore.loginModal=!0;return}else if(y>g){b.warning("您的Token账户已过期，请续费");return}else window.open(`/auth/logintoken?usertoken=${o}&carid=${t}`,"_blank")},getlistpages(t){this.loadinggpt=!0;const o=this.showgpt,{pluspage:g,ispage:y,plusTotalPages:_,isTotalPages:P}=this;let m,k;if(o==="isplus"?(m=g+t,k=_):o==="isgpt"&&(m=y+t,k=P),m<1){b.info("已经是第一页了"),this.loadinggpt=!1;return}if(m>k){b.info("没有更多的频道了"),this.loadinggpt=!1;return}o==="isplus"?(this.pluspage=m,this.pluslist=[],this.fetchOtherData(m,"pluspage")):o==="isgpt"&&(this.ispage=m,this.islist=[],this.fetchOtherData(m,"ispage"))},fetchAllData(){this.fetchOtherData()},fetchOtherData(t=1,o="pluspage"){const g=this.pageSize,y=window.VITE_API_BASE_URL;K.post(y+"/app/share/list",{[o]:t,size:g}).then(_=>{this.notice=_.data.data.notice,o==="pluspage"&&(this.pluslist=_.data.data.pluslist||[],this.plustotal=_.data.data.plustotal||0,this.plusTotalPages=Math.ceil(this.plustotal/g),this.plushasMoreData=t<this.plusTotalPages,this.islist=_.data.data.islist||[],this.istotal=_.data.data.istotal||0,this.isTotalPages=Math.ceil(this.istotal/g),this.ishasMoreData=t<this.isTotalPages,this.loadingplus=!1,this.loadinggpt=!1),o==="ispage"&&(this.islist=_.data.data.islist||[],this.istotal=_.data.data.istotal||0,this.isTotalPages=Math.ceil(this.istotal/g),this.ishasMoreData=t<this.isTotalPages,this.loadingplus=!1,this.loadinggpt=!1),this.loadingplus=!1,this.loadinggpt=!1}).catch(_=>{this.loadingplus=!1,this.loadinggpt=!1,console.error("请求错误:",_)})}}});const yt={class:"d-flex align-center"},kt={key:0,class:"text-h5"},Ct=n(" Plus会员 "),St=n("普通会员"),wt=n("注销"),Tt={key:1,class:"text-h5"},Ft=n(" 欢迎回来， "),xt=n("立即登录 "),At={class:"text-subtitle-1 textSecondary mt-2"},Dt={class:"mt-8"},Et={class:"d-flex"},Bt={key:0},Pt=l("div",{class:"text-subtitle-1 textPrimary mt-1"},"到期时间",-1),Ot={class:"d-flex"},Vt={class:"text-h4 textPrimary"},Mt={key:1,class:"d-flex"},zt=l("h2",{class:"text-h5 textPrimary"},[l("div",null,"开通Plus会员可畅享4.0对话")],-1),Lt=[zt],$t={key:0,class:"text-subtitle-1 textPrimary mt-1"},It={key:1,class:"d-flex"},Ut={class:"text-h5 textPrimary"},Rt=l("div",{class:"mb-n2"},[l("img",{src:tt,alt:"image",width:"340"})],-1),jt={key:0},Gt=["src","alt"],Nt=["href"],Ht=["src","alt"],Wt=l("h5",{class:"text-h5"},"欢迎回来，",-1),Jt=l("div",{class:"text-subtitle-1 text-medium-emphasis mt-0"},"在此可以登录或注销您的账户",-1),Qt={class:"text-center mt-2 mb-3"},qt=["innerHTML"],Kt={key:0},Xt={class:"text-h5 text-medium-emphasis text-center mt-3"},Yt={class:"text-h6 text-medium-emphasis text-center mb-5"},Zt={class:"d-flex justify-center"},te=n("安全注销"),ee={key:1},se=l("div",{class:"text-h5 text-medium-emphasis text-center mt-3"},"游客",-1),le=l("div",{class:"text-h6 text-medium-emphasis text-center mb-5"},"开通Plus会员可畅享4.0对话",-1),ae={class:"d-flex justify-center"},oe=n("立即登录"),ie=n("免费注册"),ne=n(" ChatGPT 4.0 Plus频道 "),ue=n(" ChatGPT 3.5 普通频道 "),re=n("丝滑顺畅体验AIGC"),de={class:"ml-auto d-flex justify-end"},ce={class:"ml-auto d-flex justify-end"},pe={key:0,class:"loadingbox"},_e={key:1,class:"loadingbox"},he=l("div",{class:"d-sm-flex align-center mb-5"},null,-1),me={key:0,class:"type",style:{background:"#3dd9eb"}},ge={class:"cartitle"},fe={class:"message-with-dot"},ve={class:"progress-wrapper"},be={key:0,class:"loadingbox"},ye={key:1,class:"loadingbox"},ke=l("div",{class:"d-sm-flex align-center mb-5"},null,-1),Ce={class:"cartitle"},Se={class:"message-with-dot"},we={class:"progress-wrapper"},Te=l("div",{class:"d-sm-flex align-center mb-5"},null,-1),Fe={class:"embed-container"},xe=["data"],Ae={key:0,class:"overlay"},De=n("立即前往该站点"),Ee=n("关闭遮罩"),Be={class:"px-8 py-8 py-lg-0"},Pe={class:"d-flex justify-space-between"},Oe={class:"d-flex py-5 align-center notice"},Ve=["innerHTML"],Me=l("div",{class:"d-none py-0 d-lg-block overflow-hidden"},[l("div",{class:"mb-n16 mt-3"},[l("img",{src:pt,alt:"breadcrumb"})])],-1);function ze(t,o,g,y,_,P){const m=p("a-carousel"),k=p("Usercout"),M=p("TrophyOutlined"),z=p("GhostIcon"),O=p("ThunderboltOutlined"),L=p("ApiOutlined"),T=p("SwapLeftOutlined"),F=p("SwapRightOutlined"),x=p("a-spin"),A=p("a-empty"),C=p("n-text"),D=p("a-progress"),E=p("a-card"),B=p("a-col"),w=p("a-row");return i(),d(U,null,{default:e(()=>[t.isbanner?(i(),d(f,{key:1,cols:"12",lg:"9",sm:"12"},{default:e(()=>[s(m,{autoplay:"",effect:"fade"},{default:e(()=>[(i(!0),u(I,null,$(t.bannerList,a=>(i(),u("div",{class:"homebanner",key:a.id},[a.is_enabled?(i(),u("div",jt,[a.link_url==="#"?(i(),u("img",{key:0,src:a.image_url,alt:a.title},null,8,Gt)):(i(),u("a",{key:1,href:a.link_url,target:"_blank"},[l("img",{src:a.image_url,alt:a.title},null,8,Ht)],8,Nt))])):h("",!0)]))),128))]),_:1})]),_:1})):(i(),d(f,{key:0,cols:"12",lg:"8",sm:"6"},{default:e(()=>[s(R,{elevation:"0",rounded:"md",class:"bg-lightprimary border-0"},{default:e(()=>[s(J,{class:"pt-3 pb-0"},{default:e(()=>[s(U,null,{default:e(()=>[s(f,{cols:"12",sm:"6",class:"pt-sm-10 pt-5"},{default:e(()=>[l("div",yt,[l("div",null,[t.userStore.isLogin?(i(),u("h5",kt,[n(r(t.userStore.useremail)+" ",1),t.isPlus?(i(),d(S,{key:0,size:"small",class:"ml-2 elevation-0",variant:"elevated",color:"red"},{default:e(()=>[Ct]),_:1})):(i(),d(S,{key:1,size:"small",class:"ml-2 elevation-0",variant:"elevated",color:""},{default:e(()=>[St]),_:1})),s(S,{size:"small",class:"ml-2 elevation-0",variant:"elevated",onClick:t.outlogin},{default:e(()=>[wt]),_:1},8,["onClick"])])):(i(),u("h5",Tt,[Ft,s(S,{class:"ml-2 elevation-0",size:"small",variant:"elevated",onClick:t.toggleModal},{default:e(()=>[xt]),_:1},8,["onClick"])])),l("h6",At,"注意，今天已经是 "+r(t.currentDate)+"了",1)])]),l("div",Dt,[l("div",Et,[t.userStore.isLogin?(i(),u("div",Bt,[Pt,l("div",Ot,[l("h2",Vt,r(t.userStore.expireTime),1)])])):(i(),u("div",Mt,Lt)),s(ht,{vertical:"",class:"mx-5"}),l("div",null,[t.userStore.isLogin?(i(),u("div",$t,"剩余时间")):h("",!0),t.userStore.isLogin?(i(),u("div",It,[l("h2",Ut,[l("div",null,r(t.userStore.daysBetween),1)])])):h("",!0)])])])]),_:1}),s(f,{cols:"12",sm:"6",class:"text-sm-right"},{default:e(()=>[Rt]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})),t.isbanner?(i(),d(f,{key:3,cols:"12",lg:"3",sm:"12"},{default:e(()=>[s(R,{elevation:"10"},{default:e(()=>[s(J,null,{default:e(()=>[Wt,Jt,l("div",Qt,[s(mt,{size:"120"},{default:e(()=>[l("div",{innerHTML:t.userStore.userAvatar,style:{width:"90px"}},null,8,qt)]),_:1})]),t.isLogin?(i(),u("div",Kt,[l("div",Xt,r(t.useremail),1),l("div",Yt,"距离"+r(t.isPlus?"Plus":"普通")+"会员到期还剩"+r(t.daysBetween)+"天 ",1),l("div",Zt,[s(v,{color:"primary",class:"mx-2",flat:"",to:"/user/plus"},{default:e(()=>[n(r(t.isPlus?"续费":"开通")+"会员",1)]),_:1}),s(v,{color:"error",class:"mx-2",variant:"outlined",flat:"",onClick:t.outlogin},{default:e(()=>[te]),_:1},8,["onClick"])])])):(i(),u("div",ee,[se,le,l("div",ae,[s(v,{color:"primary",class:"mx-2",flat:"",onClick:t.toggleModal},{default:e(()=>[oe]),_:1},8,["onClick"]),s(v,{color:"error",class:"mx-2",variant:"outlined",flat:"",onClick:t.regtoggleModal},{default:e(()=>[ie]),_:1},8,["onClick"])])]))]),_:1})]),_:1})]),_:1})):(i(),d(f,{key:2,cols:"12",lg:"4",sm:"6"},{default:e(()=>[s(k)]),_:1})),s(f,{cols:"12"},{default:e(()=>[s(U,{class:"align-center"},{default:e(()=>[s(f,{cols:"12",md:"10"},{default:e(()=>[s(gt,{modelValue:t.activeTab,"onUpdate:modelValue":[o[0]||(o[0]=a=>t.activeTab=a),t.clicktab]},{default:e(()=>[s(j,{value:"isplus",color:"#a07be6"},{default:e(()=>[s(M,{style:{"font-size":"18px","margin-right":"8px"}}),ne,s(S,{size:"small",class:"ml-2 elevation-0",variant:"elevated",color:"#a07be6"},{default:e(()=>[n("共计 "+r(t.plustotal)+" 个频道 ",1)]),_:1})]),_:1}),s(j,{value:"isgpt",color:"#24d4ae"},{default:e(()=>[s(z,{"stroke-width":"2",width:"20",class:"v-icon--start"}),s(O,{style:{"font-size":"18px","margin-right":"8px"}}),ue,s(S,{size:"small",class:"ml-2 elevation-0",variant:"elevated",color:"#24d4ae"},{default:e(()=>[n("共计 "+r(t.istotal)+" 个频道 ",1)]),_:1})]),_:1}),t.tab_url_enable?(i(),d(j,{key:0,value:"isurl",color:"#3dd5e7"},{default:e(()=>[s(L,{style:{"font-size":"18px","margin-right":"8px"}}),n(" "+r(t.tab_url_name)+" ",1),s(S,{size:"small",class:"ml-2 elevation-0",variant:"elevated",color:"#3dd5e7"},{default:e(()=>[re]),_:1})]),_:1})):h("",!0)]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1}),t.showgpt=="isplus"&&t.plustotal>t.pageSize?(i(),d(f,{key:0,cols:"12",md:"2"},{default:e(()=>[s(Q,{width:"100",class:"ml-0 ml-md-auto mt-3 mt-md-0"},{default:e(()=>[l("div",de,[s(v,{icon:"",variant:"text",class:"text-medium-emphasis",onClick:o[1]||(o[1]=a=>t.getlistpages(-1))},{default:e(()=>[s(T)]),_:1}),s(v,{icon:"",variant:"text",class:"text-medium-emphasis",onClick:o[2]||(o[2]=a=>t.getlistpages(1))},{default:e(()=>[s(F)]),_:1})])]),_:1})]),_:1})):h("",!0),t.showgpt=="isgpt"?(i(),d(f,{key:1,cols:"12",md:"2"},{default:e(()=>[s(Q,{width:"100",class:"ml-0 ml-md-auto mt-3 mt-md-0"},{default:e(()=>[l("div",ce,[s(v,{icon:"",variant:"text",class:"text-medium-emphasis",onClick:o[3]||(o[3]=a=>t.getlistpages(-1))},{default:e(()=>[s(T,{style:{"font-size":"30px"}})]),_:1}),s(v,{icon:"",variant:"text",class:"text-medium-emphasis",onClick:o[4]||(o[4]=a=>t.getlistpages(1))},{default:e(()=>[s(F,{style:{"font-size":"30px"}})]),_:1})])]),_:1})]),_:1})):h("",!0)]),_:1}),s(ft,{class:"rounded-md"},{default:e(()=>[s(vt,{modelValue:t.activeTab,"onUpdate:modelValue":o[5]||(o[5]=a=>t.activeTab=a)},{default:e(()=>[s(G,{value:"isplus"},{default:e(()=>[t.loadingplus?(i(),u("div",pe,[s(x)])):h("",!0),t.pluslist.length==0?(i(),u("div",_e,[s(A)])):h("",!0),he,s(w,{gutter:[10,10]},{default:e(()=>[(i(!0),u(I,null,$(t.pluslist,a=>(i(),d(B,{class:"cardclss",xs:12,sm:12,md:8,lg:8,xl:4,key:a.carid},{default:e(()=>[s(E,{bodyStyle:{padding:"12px 16px"},class:H("boxclass "+(a.isplus?"pluscolor":"nopluscolor")),onClick:V=>t.plusredirectTo(a.carid)},{default:e(()=>[t.shouldShowTeam(a.remark)?(i(),u("div",me,"Team")):h("",!0),l("div",{class:"type",style:W({background:a.endpoint.labelColor})},r(a.endpoint.label!=""?a.endpoint.label:"NO"),5),l("div",ge,[t.car_name_enable?(i(),d(C,{key:0,class:"title"},{default:e(()=>[n(r(t.car_plus_name_content)+r(a.id),1)]),_:2},1024)):(i(),d(C,{key:1,class:"title"},{default:e(()=>[n(r(a.carid),1)]),_:2},1024))]),l("div",fe,"实时状态："+r(a.endpoint.message),1),l("div",ve,[s(D,{class:"progress-bar",size:[0,6],percent:a.statusinfo.percent,steps:4,"stroke-color":a.endpoint.color,"show-info":!1,trailColor:a.endpoint.labelColor},null,8,["percent","stroke-color","trailColor"])])]),_:2},1032,["class","onClick"])]),_:2},1024))),128))]),_:1})]),_:1}),s(G,{value:"isgpt"},{default:e(()=>[t.loadinggpt?(i(),u("div",be,[s(x)])):h("",!0),t.islist.length===0?(i(),u("div",ye,[s(A)])):h("",!0),ke,s(w,{gutter:[10,10]},{default:e(()=>[(i(!0),u(I,null,$(t.islist,a=>(i(),d(B,{class:"cardclss",xs:12,sm:12,md:8,lg:8,xl:4,key:a.carid},{default:e(()=>[s(E,{bodyStyle:{padding:"12px 16px"},class:H("boxclass "+(a.isplus?"pluscolor":"nopluscolor")),onClick:V=>t.isredirectTo(a.carid)},{default:e(()=>[l("div",{class:"type",style:W({background:a.endpoint.labelColor})},r(a.endpoint.label!=""?a.endpoint.label:"NO"),5),l("div",Ce,[t.car_name_enable?(i(),d(C,{key:0,class:"title"},{default:e(()=>[n(r(t.car_gpt_name_content)+r(a.id),1)]),_:2},1024)):(i(),d(C,{key:1,class:"title"},{default:e(()=>[n(r(a.carid),1)]),_:2},1024))]),l("div",Se,"实时状态："+r(a.endpoint.message),1),l("div",we,[s(D,{class:"progress-bar",size:[0,6],percent:a.statusinfo.percent,steps:4,"stroke-color":a.endpoint.color,"show-info":!1,trailColor:a.endpoint.labelColor},null,8,["percent","stroke-color","trailColor"])])]),_:2},1032,["class","onClick"])]),_:2},1024))),128))]),_:1})]),_:1}),s(G,{value:"isurl"},{default:e(()=>[Te,s(w,{gutter:[10,10]},{default:e(()=>[l("div",Fe,[l("object",{data:t.tab_url_content,class:"styled-object",type:"text/html",width:"100%",height:"720px"},null,8,xe),t.showOverlay?(i(),u("div",Ae,[s(v,{color:"info",rounded:"",onClick:t.goToSite},{default:e(()=>[De]),_:1},8,["onClick"]),s(v,{class:"ml-3",rounded:"",onClick:t.hideOverlay},{default:e(()=>[Ee]),_:1},8,["onClick"])])):h("",!0)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),t.isannoun?(i(),d(f,{key:4,cols:"12",lg:"12",sm:"12"},{default:e(()=>[s(R,{class:"bg-lightprimary elevation-0 rounded-md"},{default:e(()=>[l("div",Be,[l("div",Pe,[l("div",Oe,[l("div",{innerHTML:t.isannoun_content},null,8,Ve)]),Me])])]),_:1})]),_:1})):h("",!0)]),_:1})}const bs=_t(bt,[["render",ze]]);export{bs as default};
