import{_ as q,a as W}from"./welcome-bg-fdc26606.js";import{u as $,i as H}from"../index-f81df51d.js";import{s as X}from"./pinia-98ec2995.js";import{u as K}from"./userShare-003c65ab.js";import{_ as Y}from"./BaseBreadcrumb.vue_vue_type_style_index_0_lang-5ab39e07.js";import{_ as Z}from"./_plugin-vue_export-helper-c27b6911.js";import{f as tt}from"./date-fns-8e15a9c0.js";import{p as et,D as k,J as st,K as at,y as h,C as L,l as N,b as R,o as ot,n as F,L as lt}from"./vuetify-0a3604cc.js";import{r as c,o as Q,aS as D,aJ as a,a8 as n,c as e,bl as s,b2 as i,a9 as t,F as A,aQ as G,G as f,d as nt,k as it,u,a7 as z,a6 as O,aC as rt,h as J}from"./@vue-7e44e6dd.js";import{m as C,M as ct}from"./ant-design-vue-32902922.js";import{h as dt}from"./@ant-design-bd925dbd.js";import"./vue-router-0e41780a.js";import"./dayjs-9df2e3b6.js";import"./@multiavatar-7283d2b3.js";import"./axios-6f43ddff.js";/* empty css             */import"./vue3-apexcharts-fb146ff1.js";import"./vue-fdaf27ce.js";import"./apexcharts-a35677a7.js";import"./core-js-40ace11a.js";import"./vue-demi-71ba0ef2.js";import"./@babel-8a290753.js";import"./@ctrl-044b369f.js";import"./resize-observer-polyfill-3d106987.js";import"./@emotion-f7664732.js";import"./stylis-5efc5547.js";import"./scroll-into-view-if-needed-6b992d05.js";import"./compute-scroll-into-view-183f845a.js";import"./vue-types-ef06c517.js";import"./dom-align-529d0cdc.js";import"./lodash-es-5af3e9d7.js";import"./async-validator-dee29e8b.js";import"./throttle-debounce-87e7e444.js";import"./crypto-js-3b32aad8.js";import"./ChatBc-abd90dc1.js";const _t="/list/assets/gold-afe5fc99.png",j="/list/assets/silver-9ec10c43.png";const ut={methods:{format:tt},setup(){const P=[{text:"邀请会员",value:"payer_id"},{text:"奖励类型",value:"reward_type"},{text:"奖励天数",value:"reward_days"},{text:"奖励时间",value:"reward_time"}],_=c([]),m=c(1),o=c(5),I=c(0),y=c(0),w=c(0),r=c(""),b=K(),l=$(),V=c(b.invcode),T=c(""),U=()=>{if(!b.isLogin)return C.error("请先登录后再获取复制邀请链接！"),!1;navigator.clipboard.writeText(T.value).then(()=>{C.success("推广链接已复制到剪贴板")}).catch(d=>{C.error("复制失败，请手动复制")})},B=async d=>{const v=new URLSearchParams;v.append("page",d),v.append("size",o.value);try{const g=window.VITE_API_BASE_URL,p=await H.post(g+"/app/user/invcode",v.toString(),{headers:{"Content-Type":"application/x-www-form-urlencoded"}});_.value=p.data.data.invlist.list,I.value=p.data.data.invlist.total,y.value=p.data.data.count,w.value=Math.ceil(I.value/o.value),T.value=window.location.origin+"/list/#/?share="+b.invcode}catch(g){console.error("Error fetching data:",g)}},E=d=>{m.value=d,B(d)};return Q(async()=>{await B(m.value),await l.loadSettingsFromAPI();let d=l.getSetting("invitation_day_enable"),v=l.getSetting("invitation_prop_enable"),g=Number(l.getSetting("invitation_day_days")),p=Number(l.getSetting("invitation_prop_percent"));d&&v?r.value=`邀请好友注册后您的好友成功购买套餐，您将获得 ${g} 天的会员时间续期，以及该套餐的 ${p}% 的会员时间续期。`:d?r.value=`邀请好友注册后您的好友成功购买套餐，您将获得 ${g} 天的会员时间续期。`:v?r.value=`邀请好友注册后您的好友成功购买套餐，您将获得该套餐的 ${p}% 的会员时间续期。`:r.value="邀请好友注册后您的好友成功购买套餐，您将获得奖励。"}),{headers:P,invlist:_,invcode:V,invcontent:r,fullUrl:T,currentPage:m,totalPages:w,usercount:y,userStore:b,copyToClipboard:U,handlePageChange:E}}},mt=t("h3",{class:"mt-5",style:{"font-weight":"bold"}},"邀请好友使用",-1),pt={key:0,class:"text-h6"},ht={key:1,class:"text-h6"},ft={class:"d-flex mt-3 align-center"},vt={class:"text-subtitle-2 opacity-25"},gt=f("复制推广连接");function xt(P,_,m,o,I,y){const w=D("a-input"),r=D("a-button"),b=D("a-input-group");return a(),n(A,null,[e(k,{class:"mt-5"},{default:s(()=>[e(et,{class:"note-sheet pa-5 pb-4 rounded-md cursor-pointer mb-4"},{default:s(()=>[mt,o.userStore.isLogin?(a(),n("h6",pt," 您已累计邀请 "+i(o.usercount)+" 位好友， 您的邀请码为 "+i(o.invcode)+"， "+i(o.invcontent),1)):(a(),n("h6",ht," 登录即可获取您的专属邀请码， "+i(o.invcontent),1)),t("div",ft,[t("small",vt,i(P.selectedNotice?y.format(new Date(P.selectedNotice.update_time),"yyyy-MM-dd"):""),1)]),e(b,{class:"mt-5",compact:""},{default:s(()=>[e(w,{disabled:"true",value:o.fullUrl,"onUpdate:value":_[0]||(_[0]=l=>o.fullUrl=l),style:{width:"calc(100% - 115px)"}},null,8,["value"]),e(r,{style:{"background-color":"rgb(var(--v-theme-primary)) !important",color:"white"},onClick:o.copyToClipboard},{default:s(()=>[gt]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1}),e(k,{class:"elevation-0 rounded-md mt-5",elevation:"10"},{default:s(()=>[e(st,{class:"month-table"},{default:s(()=>[t("thead",null,[t("tr",null,[(a(!0),n(A,null,G(o.headers,l=>(a(),n("th",{key:l.value},i(l.text),1))),128))])]),t("tbody",null,[(a(!0),n(A,null,G(o.invlist,l=>(a(),n("tr",{key:l.id},[t("td",null,i(l.user),1),t("td",null,i(l.reward_type===1?"Plus会员":"普通会员"),1),t("td",null,i(l.reward_days),1),t("td",null,i(l.reward_time),1)]))),128))])]),_:1}),e(at,{modelValue:o.currentPage,"onUpdate:modelValue":[_[1]||(_[1]=l=>o.currentPage=l),o.handlePageChange],length:o.totalPages},null,8,["modelValue","length","onUpdate:modelValue"])]),_:1})],64)}const yt=Z(ut,[["render",xt]]),bt={class:"d-flex align-center"},wt={key:0,class:"text-h5 mb-0"},St=f("注销"),kt={key:1,class:"text-h5 ml-4"},Ct=f(" 欢迎访问用户中心， "),Pt=f("立即登录"),Vt=f("免费注册"),Tt={class:"mt-8"},Ut={key:0,class:"d-flex"},Lt=t("div",{class:"text-subtitle-1 textPrimary mt-1"},"剩余天数",-1),zt={class:"d-flex"},At={class:"text-h3 textPrimary"},It=t("div",{class:"text-subtitle-1 textPrimary mt-1"},"到期时间",-1),Bt={class:"d-flex"},Mt={class:"text-h3 textPrimary"},Nt={key:1,class:"d-flex"},Dt=t("div",null,[t("div",{class:"d-flex"},[t("h2",{class:"text-h5 textPrimary"},"开通Plus会员可畅享4.0对话 ")]),t("p",{class:"text-subtitle-1"},"GPT4回答次数限制为Open AI限制不保障GPT4回答次数")],-1),Et=[Dt],Rt=t("div",{class:"mb-n2"},[t("img",{src:W,class:"",alt:"image",width:"340"})],-1),Ft={key:0},Ot=t("h6",{class:"text-subtitle-1 text-medium-emphasis mb-4"},"会员等级",-1),Gt=t("img",{src:_t,alt:"image",width:"150"},null,-1),Jt=t("h5",{class:"text-h5 pt-3"},"您是尊贵的Plus会员",-1),$t=t("h6",{class:"text-subtitle-1 text-13 my-4 textSecondary"}," 您已开通Plus会员，全站特权轻松享 ",-1),Ht=f("续费Plus会员"),Kt=t("h6",{class:"text-subtitle-1 text-medium-emphasis mb-4"},"会员等级",-1),Qt=t("img",{src:j,alt:"image",width:"150"},null,-1),jt=t("h5",{class:"text-h5 pt-3"},"您是普通会员",-1),qt=t("h6",{class:"text-subtitle-1 text-13 my-4 textSecondary"}," 开通Plus会员，尊享多种特权 ",-1),Wt=f("开通Plus会员"),Xt=t("h6",{class:"text-subtitle-1 text-medium-emphasis mb-4"},"用户标识",-1),Yt=t("img",{src:j,alt:"image",width:"150"},null,-1),Zt=t("h5",{class:"text-h5 pt-3"},"您还没有登录",-1),te=t("h6",{class:"text-subtitle-1 text-13 my-4 textSecondary"}," 开通Plus会员，尊享多种特权 ",-1),ee=f("立即登录开通Plus会员"),se=f("最近对话窗口标题概览"),ae={class:"recent-transaction mt-10 px-3"},oe={class:"text-body-1 textSecondary text-no-wrap"},le=t("div",{class:"line mx-auto bg-grey100"},null,-1),ne={key:0,class:"text-body-1 font-weight-bold"},ie={key:1,class:"text-body-1 textSecondary"},re={key:1},ce={class:"text-body-1 textSecondary text-no-wrap"},de=t("div",{class:"line mx-auto bg-grey100"},null,-1),_e=t("h6",{class:"text-body-1 font-weight-bold"},"登录查看对话窗口历史",-1),Qe=nt({setup(P){const _=$(),m=K(),{useremail:o,userAvatar:I,expireTime:y,isPlus:w,isLogin:r,expired:b,daysBetween:l}=X(m),V=c([]),T=c({title:"用户中心"}),U=c(!1),B=c([{text:"系统主页",disabled:!1,href:"#"},{text:"用户中心",disabled:!0,href:"#"}]);function E(){const p=window.VITE_API_BASE_URL;H.post(p+"/app/user/message",{}).then(S=>{V.value=S.data.data}).catch(S=>{console.error("请求错误:",S)})}function d(){m.loginModal=!0}function v(){m.registModel=!0}function g(){ct.confirm({zIndex:99999,centered:!0,title:"提示？",icon:J(dt),content:J("div",{style:"color:red;"},"你确定退出登录吗？"),onOk(){m.logout(),C.warn("已退出登录，如需再次使用请重新登录")},onCancel(){C.warning("您取消了退出！")}})}return Q(()=>{if(JSON.parse(localStorage.getItem("isLogin")||"false")||(C.warning("您还未登录，清先登录！"),d()),r.value&&y.value&&m.fetchUserData(),_.getSetting("paymentSwitch")){const S=new URL(window.location.href).hostname,M=_.getSetting("domainAddress"),x=_.getSetting("navSwitchAll");S===M||x===!1?U.value=!0:U.value=!1}}),it(()=>{r.value?E():V.value=[]}),(p,S)=>{const M=D("CircleIcon");return a(),n(A,null,[e(Y,{title:T.value.title,breadcrumbs:B.value},null,8,["title","breadcrumbs"]),e(N,null,{default:s(()=>[e(h,{cols:"12",lg:"8"},{default:s(()=>[e(k,{elevation:"0",rounded:"md",class:"bg-lightprimary border-0"},{default:s(()=>[e(L,{class:"pt-3 pb-0"},{default:s(()=>[e(N,null,{default:s(()=>[e(h,{cols:"12",sm:"6",class:"pt-sm-10 pt-5"},{default:s(()=>[t("div",bt,[u(o)?(a(),n("h5",wt,[f(" 欢迎，"+i(u(o))+" ",1),e(R,{size:"small",class:"ml-2 elevation-0",variant:"elevated",onClick:g},{default:s(()=>[St]),_:1})])):(a(),n("h5",kt,[Ct,e(R,{class:"ml-2 elevation-0",size:"small",variant:"elevated",onClick:d},{default:s(()=>[Pt]),_:1}),e(R,{class:"ml-2 elevation-0",size:"small",variant:"elevated",onClick:v},{default:s(()=>[Vt]),_:1})]))]),t("div",Tt,[u(r)?(a(),n("div",Ut,[t("div",null,[Lt,t("div",zt,[t("h2",At,i(u(l)),1)])]),e(ot,{vertical:"",class:"mx-5"}),t("div",null,[It,t("div",Bt,[t("h2",Mt,i(u(y)),1)])])])):z("",!0),u(r)?z("",!0):(a(),n("div",Nt,Et))])]),_:1}),e(h,{cols:"12",sm:"6",class:"text-sm-right"},{default:s(()=>[Rt]),_:1})]),_:1})]),_:1})]),_:1}),e(k,{elevation:"0",rounded:"md",class:"bg-lightsecondary mt-6"},{default:s(()=>[e(q)]),_:1}),U.value?(a(),n("div",Ft,[e(yt)])):z("",!0)]),_:1}),e(h,{cols:"12",lg:"4"},{default:s(()=>[e(k,{elevation:"10",class:"mt-sm-0 mt-6"},{default:s(()=>[u(w)&&u(r)?(a(),O(L,{key:0,class:"text-center"},{default:s(()=>[Ot,Gt,Jt,$t,e(F,{flat:"",color:"primary",to:"/user/plus"},{default:s(()=>[Ht]),_:1})]),_:1})):u(r)?(a(),O(L,{key:1,class:"text-center"},{default:s(()=>[Kt,Qt,jt,qt,e(F,{flat:"",color:"primary",to:"/user/plus"},{default:s(()=>[Wt]),_:1})]),_:1})):z("",!0),u(r)?z("",!0):(a(),O(L,{key:2,class:"text-center"},{default:s(()=>[Xt,Yt,Zt,te,e(F,{flat:"",onClick:d,color:"primary"},{default:s(()=>[ee]),_:1})]),_:1}))]),_:1}),e(k,{class:"mt-5",elevation:"10"},{default:s(()=>[e(L,null,{default:s(()=>[e(lt,{class:"text-h5"},{default:s(()=>[se]),_:1}),t("div",ae,[u(r)?(a(!0),n(A,{key:0},G(V.value,x=>(a(),n("div",{key:x.title},[e(N,{class:"d-flex mb-4"},{default:s(()=>[e(h,{cols:"4",lg:"3",md:"auto",sm:"auto",class:"px-0 pt-0 pb-1 d-flex align-start"},{default:s(()=>[t("h6",oe,i(x.updateTime_ymd),1)]),_:2},1024),e(h,{cols:"1",sm:"1",class:"px-0 text-center pt-0 pb-1"},{default:s(()=>[e(M,{size:"13",class:rt("text-"+x.textcolor)},null,8,["class"]),le]),_:2},1024),e(h,{cols:"7",sm:"8",class:"pt-0 pb-1"},{default:s(()=>[x.boldtext?(a(),n("h6",ne,i(x.title),1)):(a(),n("h6",ie,i(x.title),1))]),_:2},1024)]),_:2},1024)]))),128)):(a(),n("div",re,[e(N,{class:"d-flex mb-4"},{default:s(()=>[e(h,{cols:"4",lg:"3",md:"auto",sm:"auto",class:"px-0 pt-0 pb-1 d-flex align-start"},{default:s(()=>[t("h6",ce,i(new Date().toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"})),1)]),_:1}),e(h,{cols:"1",sm:"1",class:"px-0 text-center pt-0 pb-1"},{default:s(()=>[e(M,{size:"13"}),de]),_:1}),e(h,{cols:"7",sm:"8",class:"pt-0 pb-1"},{default:s(()=>[_e]),_:1})]),_:1})]))])]),_:1})]),_:1})]),_:1})]),_:1})],64)}}});export{Qe as default};
