import{u as K,i as X}from"../index-f81df51d.js";import{u as Y}from"./userShare-003c65ab.js";import{s as Z}from"./pinia-98ec2995.js";import{_ as tt,a as et}from"./welcome-bg-fdc26606.js";import{R as st,l as at}from"./Password.vue_vue_type_script_lang-21174eee.js";import{a6 as lt,a7 as ot,a8 as it,m as nt,a9 as ut,h as rt}from"./@ant-design-bd925dbd.js";import{m as y,M as dt}from"./ant-design-vue-32902922.js";import{d as ct,r as c,o as pt,h as H,aJ as i,a6 as d,bl as e,c as s,a9 as a,a8 as u,G as n,b2 as r,a7 as m,aQ as $,F as I,aS as p,aC as W,aE as J}from"./@vue-7e44e6dd.js";import{_ as _t}from"./ChatBc-abd90dc1.js";import{_ as ht}from"./_plugin-vue_export-helper-c27b6911.js";import{y as f,C as Q,l as U,b as S,o as mt,D as R,r as gt,n as b,E as ft,F as j,p as q,G as vt,H as bt,I as G}from"./vuetify-0a3604cc.js";import"./vue-router-0e41780a.js";import"./dayjs-9df2e3b6.js";import"./@multiavatar-7283d2b3.js";import"./axios-6f43ddff.js";/* empty css             */import"./vue3-apexcharts-fb146ff1.js";import"./vue-fdaf27ce.js";import"./apexcharts-a35677a7.js";import"./core-js-40ace11a.js";import"./vue-demi-71ba0ef2.js";import"./@babel-8a290753.js";import"./@ctrl-044b369f.js";import"./resize-observer-polyfill-3d106987.js";import"./@emotion-f7664732.js";import"./stylis-5efc5547.js";import"./scroll-into-view-if-needed-6b992d05.js";import"./compute-scroll-into-view-183f845a.js";import"./vue-types-ef06c517.js";import"./dom-align-529d0cdc.js";import"./lodash-es-5af3e9d7.js";import"./async-validator-dee29e8b.js";import"./throttle-debounce-87e7e444.js";import"./crypto-js-3b32aad8.js";import"./loginChat.vue_vue_type_style_index_0_lang-bc0f2571.js";const yt=ct({components:{Regist:st,Usercout:tt,loginChat:at,ApiOutlined:lt,ThunderboltOutlined:ot,TrophyOutlined:it,SwapRightOutlined:nt,SwapLeftOutlined:ut},setup(){const t=Y(),l=K(),{useremail:h,invcode:v,userToken:_,userAvatar:B,expireTime:g,isPlus:k,isLogin:M,expired:z,daysBetween:L}=Z(t),P=c(""),O=c(""),w=c(!0),F=c(!1),D=c(""),C=c(!1),x=c(!1),E=c(""),A=c(""),T=c(!1),o=c(""),V=c(""),N=c([]);return pt(async()=>{await l.loadSettingsFromAPI(),P.value=String(l.getSetting("siteTitle")||""),O.value=String(l.getSetting("siteDescription")||""),w.value=l.getSetting("isbanner")!==void 0?l.getSetting("isbanner")===!0:!1,F.value=l.getSetting("isannoun")!==void 0?l.getSetting("isannoun")===!0:!1,C.value=l.getSetting("teamopen")!==void 0?l.getSetting("teamopen")===!0:!1,D.value=String(l.getSetting("isannoun_content")||""),x.value=l.getSetting("car_name_enable")===!0,E.value=String(l.getSetting("car_plus_name_content")||""),A.value=String(l.getSetting("car_gpt_name_content")||""),T.value=l.getSetting("tab_url_enable")===!0,o.value=String(l.getSetting("tab_url_name")||""),V.value=String(l.getSetting("tab_url_content")||""),N.value=l.bannerList}),{siteTitle:P,isbanner:w,isannoun:F,isannoun_content:D,teamopen:C,car_name_enable:x,car_plus_name_content:E,car_gpt_name_content:A,tab_url_enable:T,tab_url_name:o,tab_url_content:V,userStore:t,outlogin:()=>{dt.confirm({zIndex:99999,centered:!0,title:"提示？",icon:H(rt),content:H("div",{style:"color:red;"},"你确定退出登录吗？"),onOk(){t.logout(),y.success("已退出登录，如需再次使用请重新登录")},onCancel(){y.warning("您取消了退出！")}})},userToken:_,useremail:h,userAvatar:B,expireTime:g,isPlus:k,isLogin:M,expired:z,daysBetween:L,bannerList:N}},data(){return{activeTab:c("isplus"),userToken:c(null),segmented:{content:"soft",footer:"soft"},currentDate:new Date().toISOString().split("T")[0],pluslist:[],islist:[],notice:"",plustotal:0,istotal:0,ispage:1,pluspage:1,plushasMoreData:!0,ishasMoreData:!0,plusTotalPages:1,isTotalPages:1,pageSize:36,showgpt:"isplus",noticeisenable:!1,showOverlay:!0,loadingplus:!0,loadinggpt:!0}},created(){this.userToken,this.userStore.fetchUserData(),this.fetchAllData()},methods:{shouldShowTeam(t){return this.teamopen&&/t/i.test(t)},hideOverlay(){this.showOverlay=!1},goToSite(){let t=this.tab_url_content;window.open(t,"_blank")},clicktab(t){t==="isgpt"?this.showgpt="isgpt":t==="isplus"?this.showgpt="isplus":this.showgpt=""},toggleModal(){this.userStore.loginModal=!0},regtoggleModal(){this.userStore.registModel=!0},plusredirectTo(t){const l=new Date(this.expireTime),h=new Date,v=this.userToken;if(v===null){y.error("您还没有登录，请先登录"),this.userStore.loginModal=!0;return}else if(h>l){y.warning("您的UserToken账户已过期，请续费");return}else if(this.isPlus)window.open(`/auth/logintoken?usertoken=${v}&carid=${t}`,"_blank");else{y.error("您还不是Plus会员，请在线开通Plus会员专属频道权限");return}},isredirectTo(t){const l=this.userToken,h=new Date(this.expireTime),v=new Date;if(l===null){y.warning("您还没有登录，请先登录"),this.userStore.loginModal=!0;return}else if(v>h){y.warning("您的Token账户已过期，请续费");return}else window.open(`/auth/logintoken?usertoken=${l}&carid=${t}`,"_blank")},getlistpages(t){this.loadinggpt=!0;const l=this.showgpt,{pluspage:h,ispage:v,plusTotalPages:_,isTotalPages:B}=this;let g,k;if(l==="isplus"?(g=h+t,k=_):l==="isgpt"&&(g=v+t,k=B),g<1){y.info("已经是第一页了"),this.loadinggpt=!1;return}if(g>k){y.info("没有更多的频道了"),this.loadinggpt=!1;return}l==="isplus"?(this.pluspage=g,this.pluslist=[],this.fetchOtherData(g,"pluspage")):l==="isgpt"&&(this.ispage=g,this.islist=[],this.fetchOtherData(g,"ispage"))},fetchAllData(){this.fetchOtherData()},fetchOtherData(t=1,l="pluspage"){const h=this.pageSize,v=window.VITE_API_BASE_URL;X.post(v+"/app/share/list",{[l]:t,size:h}).then(_=>{this.notice=_.data.data.notice,l==="pluspage"&&(this.pluslist=_.data.data.pluslist||[],this.plustotal=_.data.data.plustotal||0,this.plusTotalPages=Math.ceil(this.plustotal/h),this.plushasMoreData=t<this.plusTotalPages,this.islist=_.data.data.islist||[],this.istotal=_.data.data.istotal||0,this.isTotalPages=Math.ceil(this.istotal/h),this.ishasMoreData=t<this.isTotalPages,this.loadingplus=!1,this.loadinggpt=!1),l==="ispage"&&(this.islist=_.data.data.islist||[],this.istotal=_.data.data.istotal||0,this.isTotalPages=Math.ceil(this.istotal/h),this.ishasMoreData=t<this.isTotalPages,this.loadingplus=!1,this.loadinggpt=!1),this.loadingplus=!1,this.loadinggpt=!1}).catch(_=>{this.loadingplus=!1,this.loadinggpt=!1,console.error("请求错误:",_)})}}});const kt={class:"d-flex align-center"},Ct={key:0,class:"text-h5"},St=n(" Plus会员 "),Tt=n("普通会员"),wt=n("注销"),Ft={key:1,class:"text-h5"},Dt=n(" 欢迎回来， "),xt=n("登录 / 注册"),Et={class:"text-subtitle-1 textSecondary mt-2"},At={class:"mt-8"},Bt={class:"d-flex"},Pt={key:0,class:"text-subtitle-1 textPrimary mt-1"},Ot={key:1,class:"d-flex"},Vt={class:"text-h4 textPrimary"},Mt={key:0},zt={key:1},Lt={key:2,class:"d-flex"},$t=a("h2",{class:"text-h5 textPrimary"},[a("div",null,"开通Plus会员可畅享4.0对话")],-1),It=[$t],Ut={key:0},Rt=a("div",{class:"text-subtitle-1 textPrimary mt-1"},"到期时间",-1),jt={class:"d-flex"},Gt={class:"text-h4 textPrimary"},Nt=a("div",{class:"mb-n2"},[a("img",{src:et,alt:"image",width:"340"})],-1),Ht=["href"],Wt=["src","alt"],Jt=a("h5",{class:"text-h5"},"欢迎回来，",-1),Qt=a("div",{class:"text-subtitle-1 text-medium-emphasis mt-0"},"在此可以登录或注销您的账户",-1),qt={class:"text-center mt-2 mb-3"},Kt=["innerHTML"],Xt={key:0},Yt={class:"text-h5 text-medium-emphasis text-center mt-3"},Zt={class:"text-h6 text-medium-emphasis text-center mb-5"},te={class:"d-flex justify-center"},ee=n("安全注销"),se={key:1},ae=a("div",{class:"text-h5 text-medium-emphasis text-center mt-3"},"UserEmail",-1),le=a("div",{class:"text-h6 text-medium-emphasis text-center mb-5"},"开通Plus会员可畅享4.0对话",-1),oe={class:"d-flex justify-center"},ie=n("立即登录"),ne=n("免费注册"),ue=n(" ChatGPT 4.0 Plus频道 "),re=n(" ChatGPT 3.5 普通频道 "),de=n("丝滑顺畅体验AIGC"),ce={class:"ml-auto d-flex justify-end"},pe={class:"ml-auto d-flex justify-end"},_e={key:0,class:"loadingbox"},he={key:1,class:"loadingbox"},me=a("div",{class:"d-sm-flex align-center mb-5"},null,-1),ge={key:0,class:"type",style:{background:"#3dd9eb"}},fe={class:"cartitle"},ve={class:"message-with-dot"},be={class:"progress-wrapper"},ye={key:0,class:"loadingbox"},ke={key:1,class:"loadingbox"},Ce=a("div",{class:"d-sm-flex align-center mb-5"},null,-1),Se={class:"cartitle"},Te={class:"message-with-dot"},we={class:"progress-wrapper"},Fe=a("div",{class:"d-sm-flex align-center mb-5"},null,-1),De={class:"embed-container"},xe=["data"],Ee={key:0,class:"overlay"},Ae=n("立即前往该站点"),Be=n("关闭遮罩"),Pe={class:"px-8 py-8 py-lg-0"},Oe={class:"d-flex justify-space-between"},Ve={class:"d-flex py-5 align-center notice"},Me=["innerHTML"],ze=a("div",{class:"d-none py-0 d-lg-block overflow-hidden"},[a("div",{class:"mb-n16 mt-3"},[a("img",{src:_t,alt:"breadcrumb"})])],-1);function Le(t,l,h,v,_,B){const g=p("a-carousel"),k=p("Usercout"),M=p("TrophyOutlined"),z=p("GhostIcon"),L=p("ThunderboltOutlined"),P=p("ApiOutlined"),O=p("SwapLeftOutlined"),w=p("SwapRightOutlined"),F=p("a-spin"),D=p("a-empty"),C=p("n-text"),x=p("a-progress"),E=p("a-card"),A=p("a-col"),T=p("a-row");return i(),d(U,null,{default:e(()=>[t.isbanner?(i(),d(f,{key:1,cols:"12",lg:"9",sm:"12"},{default:e(()=>[s(g,{autoplay:"",effect:"fade"},{default:e(()=>[(i(!0),u(I,null,$(t.bannerList,o=>(i(),u("div",{class:"homebanner",key:o.id},[o.is_enabled?(i(),u("a",{key:0,href:o.link_url,target:"_blank"},[a("img",{src:o.image_url,alt:o.title},null,8,Wt)],8,Ht)):m("",!0)]))),128))]),_:1})]),_:1})):(i(),d(f,{key:0,cols:"12",lg:"8",sm:"6"},{default:e(()=>[s(R,{elevation:"0",rounded:"md",class:"bg-lightprimary border-0"},{default:e(()=>[s(Q,{class:"pt-3 pb-0"},{default:e(()=>[s(U,null,{default:e(()=>[s(f,{cols:"12",sm:"6",class:"pt-sm-10 pt-5"},{default:e(()=>[a("div",kt,[a("div",null,[t.userStore.isLogin?(i(),u("h5",Ct,[n(r(t.userStore.useremail)+" ",1),t.isPlus?(i(),d(S,{key:0,size:"small",class:"ml-2 elevation-0",variant:"elevated",color:"red"},{default:e(()=>[St]),_:1})):(i(),d(S,{key:1,size:"small",class:"ml-2 elevation-0",variant:"elevated",color:""},{default:e(()=>[Tt]),_:1})),s(S,{size:"small",class:"ml-2 elevation-0",variant:"elevated",onClick:t.outlogin},{default:e(()=>[wt]),_:1},8,["onClick"])])):(i(),u("h5",Ft,[Dt,s(S,{class:"ml-2 elevation-0",size:"small",variant:"elevated",onClick:t.toggleModal},{default:e(()=>[xt]),_:1},8,["onClick"])])),a("h6",Et,"注意，今天已经是 "+r(t.currentDate)+"了",1)])]),a("div",At,[a("div",Bt,[a("div",null,[t.userStore.isLogin?(i(),u("div",Pt,"剩余天数")):m("",!0),t.userStore.isLogin?(i(),u("div",Ot,[a("h2",Vt,[t.userStore.expired?(i(),u("div",Mt,"已过期")):(i(),u("div",zt,r(t.userStore.daysBetween),1))])])):(i(),u("div",Lt,It))]),s(mt,{vertical:"",class:"mx-5"}),t.userStore.isLogin?(i(),u("div",Ut,[Rt,a("div",jt,[a("h2",Gt,r(t.userStore.expireTime),1)])])):m("",!0)])])]),_:1}),s(f,{cols:"12",sm:"6",class:"text-sm-right"},{default:e(()=>[Nt]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})),t.isbanner?(i(),d(f,{key:3,cols:"12",lg:"3",sm:"12"},{default:e(()=>[s(R,{elevation:"10"},{default:e(()=>[s(Q,null,{default:e(()=>[Jt,Qt,a("div",qt,[s(gt,{size:"120"},{default:e(()=>[a("div",{innerHTML:t.userStore.userAvatar,style:{width:"90px"}},null,8,Kt)]),_:1})]),t.isLogin?(i(),u("div",Xt,[a("div",Yt,r(t.useremail),1),a("div",Zt,"距离"+r(t.isPlus?"Plus":"普通")+"会员到期还剩"+r(t.daysBetween)+"天",1),a("div",te,[s(b,{color:"primary",class:"mx-2",flat:"",to:"/user/plus"},{default:e(()=>[n(r(t.isPlus?"续费":"开通")+"会员",1)]),_:1}),s(b,{color:"error",class:"mx-2",variant:"outlined",flat:"",onClick:t.outlogin},{default:e(()=>[ee]),_:1},8,["onClick"])])])):(i(),u("div",se,[ae,le,a("div",oe,[s(b,{color:"primary",class:"mx-2",flat:"",onClick:t.toggleModal},{default:e(()=>[ie]),_:1},8,["onClick"]),s(b,{color:"error",class:"mx-2",variant:"outlined",flat:"",onClick:t.regtoggleModal},{default:e(()=>[ne]),_:1},8,["onClick"])])]))]),_:1})]),_:1})]),_:1})):(i(),d(f,{key:2,cols:"12",lg:"4",sm:"6"},{default:e(()=>[s(k)]),_:1})),s(f,{cols:"12"},{default:e(()=>[s(U,{class:"align-center"},{default:e(()=>[s(f,{cols:"12",md:"10"},{default:e(()=>[s(ft,{modelValue:t.activeTab,"onUpdate:modelValue":[l[0]||(l[0]=o=>t.activeTab=o),t.clicktab]},{default:e(()=>[s(j,{value:"isplus",color:"#a07be6"},{default:e(()=>[s(M,{style:{"font-size":"18px","margin-right":"8px"}}),ue,s(S,{size:"small",class:"ml-2 elevation-0",variant:"elevated",color:"#a07be6"},{default:e(()=>[n("共计 "+r(t.plustotal)+" 个频道 ",1)]),_:1})]),_:1}),s(j,{value:"isgpt",color:"#24d4ae"},{default:e(()=>[s(z,{"stroke-width":"2",width:"20",class:"v-icon--start"}),s(L,{style:{"font-size":"18px","margin-right":"8px"}}),re,s(S,{size:"small",class:"ml-2 elevation-0",variant:"elevated",color:"#24d4ae"},{default:e(()=>[n("共计 "+r(t.istotal)+" 个频道 ",1)]),_:1})]),_:1}),t.tab_url_enable?(i(),d(j,{key:0,value:"isurl",color:"#3dd5e7"},{default:e(()=>[s(P,{style:{"font-size":"18px","margin-right":"8px"}}),n(" "+r(t.tab_url_name)+" ",1),s(S,{size:"small",class:"ml-2 elevation-0",variant:"elevated",color:"#3dd5e7"},{default:e(()=>[de]),_:1})]),_:1})):m("",!0)]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1}),t.showgpt=="isplus"&&t.plustotal>t.pageSize?(i(),d(f,{key:0,cols:"12",md:"2"},{default:e(()=>[s(q,{width:"100",class:"ml-0 ml-md-auto mt-3 mt-md-0"},{default:e(()=>[a("div",ce,[s(b,{icon:"",variant:"text",class:"text-medium-emphasis",onClick:l[1]||(l[1]=o=>t.getlistpages(-1))},{default:e(()=>[s(O)]),_:1}),s(b,{icon:"",variant:"text",class:"text-medium-emphasis",onClick:l[2]||(l[2]=o=>t.getlistpages(1))},{default:e(()=>[s(w)]),_:1})])]),_:1})]),_:1})):m("",!0),t.showgpt=="isgpt"?(i(),d(f,{key:1,cols:"12",md:"2"},{default:e(()=>[s(q,{width:"100",class:"ml-0 ml-md-auto mt-3 mt-md-0"},{default:e(()=>[a("div",pe,[s(b,{icon:"",variant:"text",class:"text-medium-emphasis",onClick:l[3]||(l[3]=o=>t.getlistpages(-1))},{default:e(()=>[s(O,{style:{"font-size":"30px"}})]),_:1}),s(b,{icon:"",variant:"text",class:"text-medium-emphasis",onClick:l[4]||(l[4]=o=>t.getlistpages(1))},{default:e(()=>[s(w,{style:{"font-size":"30px"}})]),_:1})])]),_:1})]),_:1})):m("",!0)]),_:1}),s(vt,{class:"rounded-md"},{default:e(()=>[s(bt,{modelValue:t.activeTab,"onUpdate:modelValue":l[5]||(l[5]=o=>t.activeTab=o)},{default:e(()=>[s(G,{value:"isplus"},{default:e(()=>[t.loadingplus?(i(),u("div",_e,[s(F)])):m("",!0),t.pluslist.length==0?(i(),u("div",he,[s(D)])):m("",!0),me,s(T,{gutter:[10,10]},{default:e(()=>[(i(!0),u(I,null,$(t.pluslist,o=>(i(),d(A,{class:"cardclss",xs:12,sm:12,md:8,lg:8,xl:4,key:o.carid},{default:e(()=>[s(E,{bodyStyle:{padding:"12px 16px"},class:W("boxclass "+(o.isplus?"pluscolor":"nopluscolor")),onClick:V=>t.plusredirectTo(o.carid)},{default:e(()=>[t.shouldShowTeam(o.remark)?(i(),u("div",ge,"Team")):m("",!0),a("div",{class:"type",style:J({background:o.endpoint.labelColor})},r(o.endpoint.label!=""?o.endpoint.label:"NO"),5),a("div",fe,[t.car_name_enable?(i(),d(C,{key:0,class:"title"},{default:e(()=>[n(r(t.car_plus_name_content)+r(o.id),1)]),_:2},1024)):(i(),d(C,{key:1,class:"title"},{default:e(()=>[n(r(o.carid),1)]),_:2},1024))]),a("div",ve,"实时状态："+r(o.endpoint.message),1),a("div",be,[s(x,{class:"progress-bar",size:[0,6],percent:o.statusinfo.percent,steps:4,"stroke-color":o.endpoint.color,"show-info":!1,trailColor:o.endpoint.labelColor},null,8,["percent","stroke-color","trailColor"])])]),_:2},1032,["class","onClick"])]),_:2},1024))),128))]),_:1})]),_:1}),s(G,{value:"isgpt"},{default:e(()=>[t.loadinggpt?(i(),u("div",ye,[s(F)])):m("",!0),t.islist.length===0?(i(),u("div",ke,[s(D)])):m("",!0),Ce,s(T,{gutter:[10,10]},{default:e(()=>[(i(!0),u(I,null,$(t.islist,o=>(i(),d(A,{class:"cardclss",xs:12,sm:12,md:8,lg:8,xl:4,key:o.carid},{default:e(()=>[s(E,{bodyStyle:{padding:"12px 16px"},class:W("boxclass "+(o.isplus?"pluscolor":"nopluscolor")),onClick:V=>t.isredirectTo(o.carid)},{default:e(()=>[a("div",{class:"type",style:J({background:o.endpoint.labelColor})},r(o.endpoint.label!=""?o.endpoint.label:"NO"),5),a("div",Se,[t.car_name_enable?(i(),d(C,{key:0,class:"title"},{default:e(()=>[n(r(t.car_gpt_name_content)+r(o.id),1)]),_:2},1024)):(i(),d(C,{key:1,class:"title"},{default:e(()=>[n(r(o.carid),1)]),_:2},1024))]),a("div",Te,"实时状态："+r(o.endpoint.message),1),a("div",we,[s(x,{class:"progress-bar",size:[0,6],percent:o.statusinfo.percent,steps:4,"stroke-color":o.endpoint.color,"show-info":!1,trailColor:o.endpoint.labelColor},null,8,["percent","stroke-color","trailColor"])])]),_:2},1032,["class","onClick"])]),_:2},1024))),128))]),_:1})]),_:1}),s(G,{value:"isurl"},{default:e(()=>[Fe,s(T,{gutter:[10,10]},{default:e(()=>[a("div",De,[a("object",{data:t.tab_url_content,class:"styled-object",type:"text/html",width:"100%",height:"720px"},null,8,xe),t.showOverlay?(i(),u("div",Ee,[s(b,{color:"info",rounded:"",onClick:t.goToSite},{default:e(()=>[Ae]),_:1},8,["onClick"]),s(b,{class:"ml-3",rounded:"",onClick:t.hideOverlay},{default:e(()=>[Be]),_:1},8,["onClick"])])):m("",!0)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),t.isannoun?(i(),d(f,{key:4,cols:"12",lg:"12",sm:"12"},{default:e(()=>[s(R,{class:"bg-lightprimary elevation-0 rounded-md"},{default:e(()=>[a("div",Pe,[a("div",Oe,[a("div",Ve,[a("div",{innerHTML:t.isannoun_content},null,8,Me)]),ze])])]),_:1})]),_:1})):m("",!0)]),_:1})}const ys=ht(yt,[["render",Le]]);export{ys as default};
