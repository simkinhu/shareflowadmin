import{d as ye,aS as b,aJ as n,a6 as m,bl as a,c as t,bn as ge,a9 as s,r as i,w as ke,o as we,l as xe,a8 as y,u,b2 as p,a7 as g,F as E,aQ as N,G as C,m as be,A as Ce,aT as Se,h as W}from"./@vue-7e44e6dd.js";import{u as ae}from"./userShare-cefa2c5b.js";import{i as U,u as Ae}from"../index-02d08ce6.js";import"./loginChat.vue_vue_type_style_index_0_lang-12296bf3.js";import{m as f,M as se}from"./ant-design-vue-32902922.js";import{_ as Ie}from"./_plugin-vue_export-helper-c27b6911.js";import{l as $,y as I,r as Be,n as z,D as Q,b as Y,j as ze,f as Le,e as Oe}from"./vuetify-0a3604cc.js";import{aa as G,a6 as J,ab as Z,$ as X,ac as ee,ad as te,a as Pe,b as Ue}from"./@ant-design-bd925dbd.js";import"./pinia-98ec2995.js";import"./vue-demi-71ba0ef2.js";import"./@multiavatar-7283d2b3.js";import"./crypto-js-3b32aad8.js";import"./vue-router-0e41780a.js";import"./dayjs-9df2e3b6.js";import"./axios-6f43ddff.js";/* empty css             */import"./vue3-apexcharts-fb146ff1.js";import"./vue-fdaf27ce.js";import"./apexcharts-a35677a7.js";import"./core-js-40ace11a.js";import"./@babel-8a290753.js";import"./@ctrl-044b369f.js";import"./resize-observer-polyfill-3d106987.js";import"./@emotion-f7664732.js";import"./stylis-5efc5547.js";import"./scroll-into-view-if-needed-6b992d05.js";import"./compute-scroll-into-view-183f845a.js";import"./vue-types-ef06c517.js";import"./dom-align-529d0cdc.js";import"./lodash-es-5af3e9d7.js";import"./async-validator-dee29e8b.js";import"./throttle-debounce-87e7e444.js";const Ve="/list/assets/profilebg-44563d8e.jpg",Me=ye({setup(){return{userStore:ae()}},data(){return{usercdkInput:""}},methods:{cdkModeluse(){if(!this.userStore.isLogin)return f.warning("请先登录，再进行卡密兑换"),!1;let d=this.usercdkInput;if(!d||!/^[a-zA-Z0-9]+$/.test(d)){f.warning("请输入正确的兑换码，您输入的兑换码类型有误！");return}se.confirm({title:()=>"使用提醒：",content:()=>"您确定使用该兑换码进行激活吗？该兑换码使用过后不可再次使用！",centered:!0,onOk:()=>{const B=window.VITE_API_BASE_URL;U.post(B+"/app/user/cdkeyus",{cdkcode:d}).then(v=>{const h=v.data.data;h.code==200?(this.userStore.CdkeyModal=!1,f.success(h.msg,5),this.usercdkInput=""):h.code===400&&f.error(h.msg)}).catch(v=>{console.log(v)})},onCancel(){return f.warning("您已取消兑换码使用，如需使用请提交兑换！"),!1},zIndex:99999999})}}});function Fe(d,_,B,v,h,c){const O=b("a-alert"),w=b("a-input"),P=b("a-modal");return n(),m(P,{style:{top:"40%"},"z-index":"1009",footer:null,open:d.userStore.CdkeyModal,"onUpdate:open":_[2]||(_[2]=x=>d.userStore.CdkeyModal=x),width:"350px",title:"CDKEY兑换开通"},{default:a(()=>[t(O,{class:"mt-3",message:"请输入您的CDKEY兑换码进行兑换",type:"warning"}),t(w,{class:"mt-5",value:d.usercdkInput,"onUpdate:value":_[0]||(_[0]=x=>d.usercdkInput=x),placeholder:"请输入您的CDKEY兑换码",onKeyup:ge(d.cdkModeluse,["enter"])},null,8,["value","onKeyup"]),s("button",{class:"mt-5 loginbutton",onClick:_[1]||(_[1]=(...x)=>d.cdkModeluse&&d.cdkModeluse(...x))},"立即使用")]),_:1},8,["open"])}const Te=Ie(Me,[["render",Fe]]);const De=["src"],Ee={class:"px-4 py-1"},$e=s("h5",{class:"text-h5"},"注册时间",-1),je={class:"text-h6 font-weight-regular"},Ke=s("h5",{class:"text-h5"},"会员到期",-1),qe={class:"text-h6 font-weight-regular"},Re=s("h5",{class:"text-h5"},"会员身份",-1),He={class:"text-h6 font-weight-regular"},Ne={class:"text-center top-spacer"},We={class:"avatar-border"},Qe=["innerHTML"],Ye={key:0,class:"text-h5 mt-10"},Ge={key:1,class:"text-h5 mt-3"},Je=s("span",{class:"text-h6 font-weight-regular"},null,-1),Ze={class:"d-flex align-center justify-space-between px-10 py-1 gap-3"},Xe=C("分享好友，获得Plus会员"),et={class:"d-flex justify-space-between"},tt=["textContent"],at=["src"],st={class:"d-flex align-center mt-4"},ot={key:0,class:"text-h6 mt-n3 pr-2"},lt={key:1,class:"display-1"},nt={key:2,class:"display-1"},rt={class:"text-medium-emphasis font-weight-medium ml-2"},it=C("立即购买"),ct=C("立即兑换"),ut={key:1,style:{width:"160px",height:"160px",padding:"60px 0",margin:"0 auto"}},dt=C("点击使用微信在线支付"),pt=s("h4",null,"请使用手机打开微信扫一扫",-1),_t=s("h3",{style:{"font-weight":"bold"}},"使用微信支付开通Plus会员",-1),mt={key:1,style:{width:"160px",height:"160px",padding:"60px 0",margin:"0 auto"}},ft=C("点击使用支付宝在线支付"),vt=s("h4",null,"请使用手机打开支付宝扫一扫",-1),ht=s("h3",{style:{"font-weight":"bold"}},"使用支付宝支付开通Plus会员",-1),Gt={setup(d){const _=i("loading"),B=i("loading"),v=Ae(),h=i("1"),c=ae(),O=i([]);i(!1);const w=i(!1),P=i(null),x=i(null),S=i(null),V=i(null),M=i(null),k=i(!0),A=i(!1);i(String(v.getSetting("siteTitle")||""));const j=i(!1),oe={CheckOutlined:Pe,CloseOutlined:Ue,ApiOutlined:J,HourglassOutlined:Z,FieldTimeOutlined:G,WechatOutlined:te,QrcodeOutlined:ee,CopyOutlined:X},le=()=>{se.success({zIndex:99999,centered:!0,title:()=>"支付提醒",content:()=>W("div",{},[W("p","支付成功，已为您开通会员资格!")])})},F=()=>{if(c.isLogin===!1)return f.warning("您还未登录，请先登录后获取推广链接！"),!1;c.invcodeModel=!0},ne=()=>{if(c.isLogin===!1)return f.warning("您还未登录，请先登录后获取推广链接！"),!1;const e=window.location.origin+"/list/#/?share="+c.invcode;navigator.clipboard.writeText(e).then(()=>{f.success("推广链接已复制到剪贴板，赶快去邀请好友使用吧！")}).catch(o=>{f.error("复制失败，请点击右侧按钮手动复制！")})};function re(e){return oe[e]||null}const ie=async()=>{try{const e=window.VITE_API_BASE_URL,o=await U.post(`${e}/app/share/svip`);O.value=o.data.data}catch(e){console.error("请求错误:",e)}},ce=()=>{const e=navigator.userAgent.toLowerCase();return/mobile|android|touch|webos|hpwos/.test(e)?"mobile":"pc"},ue=()=>{const e=navigator.userAgent.toLowerCase();j.value=e.indexOf("micromessenger")!==-1},K=async e=>{try{B.value="loading",_.value="loading";const o=window.VITE_API_BASE_URL,r=await U.post(`${o}/app/user/pay`,{jsapi:j.value,paytype:e,package_id:R.value,device_type:ce()});if(r.data.data.type==="error")return f.warn("支付错误请联系管理员："+r.data.data.msg,5),!1;r.data.data.type==="qrcode"?e==="1"?(P.value=r.data.data.codeurl,B.value="active",k.value=!0):e==="2"&&(x.value=r.data.data.codeurl,_.value="active",k.value=!0):r.data.data.type==="url"?e==="1"?(M.value=r.data.data.payurl,k.value=!1):(V.value=r.data.data.payurl,k.value=!1):r.data.data.type==="urlalipaymobile"&&(V.value=o+r.data.data.payurl,k.value=!1);const L=r.data.data.orderno;clearInterval(S.value),de(L)}catch(o){console.error("请求错误:",o)}},q=e=>{M.value&&e===1?window.open(M.value,"_blank"):window.open(V.value,"_blank")},de=e=>{S.value=setInterval(()=>{pe(e)},2e3)},pe=async e=>{try{const o=window.VITE_API_BASE_URL;(await U.post(`${o}/app/user/paystatus`,{orderno:e})).data.data.code==="ok"?(clearInterval(S.value),le(),await c.fetchUserData(),w.value=!1):console.log("Payment not completed yet.")}catch(o){console.error("请求错误:",o)}},R=i(0),T=i(0),_e=e=>{if(R.value=e.id,T.value=e.package_price,!c.isLogin)return f.warning("您还未登录，请先登录"),c.loginModal=!0,!1;w.value=!0,K(h.value)},me=()=>{c.CdkeyModal=!0},fe=e=>{h.value=e,w.value&&K(e)};return ke(w,e=>{!e&&S.value&&clearInterval(S.value)}),we(async()=>{if(await v.loadSettingsFromAPI(),ie(),v.getSetting("paymentSwitch")){const e=new URL(window.location.href).hostname,o=v.getSetting("domainAddress"),r=v.getSetting("navSwitchAll");e===o||r===!1?A.value=!0:A.value=!1}ue()}),xe(()=>{S.value&&clearInterval(S.value)}),(e,o)=>{const r=b("a-qrcode"),L=b("a-button"),H=b("a-tab-pane"),ve=b("a-tabs"),he=b("a-modal");return n(),y(E,null,[t(Q,{elevation:"10",class:"overflow-hidden"},{default:a(()=>[s("img",{src:u(Ve),alt:"profile",class:"w-100"},null,8,De),s("div",null,[t($,{class:"mt-1 pb-5"},{default:a(()=>[t(I,{cols:"12",lg:"4",sm:"12",class:"order-sm-second"},{default:a(()=>[s("div",Ee,[t($,{class:"justify-center"},{default:a(()=>[t(I,{cols:"4",class:"text-center"},{default:a(()=>[t(u(G),{style:{"font-size":"25px","margin-bottom":"10px"}}),$e,s("h6",je,p(u(c).createTime),1)]),_:1}),t(I,{cols:"4",class:"text-center"},{default:a(()=>[t(u(J),{style:{"font-size":"25px","margin-bottom":"10px"}}),Ke,s("h6",qe,p(u(c).expireTime),1)]),_:1}),t(I,{cols:"4",class:"text-center"},{default:a(()=>[t(u(Z),{style:{"font-size":"25px","margin-bottom":"10px"}}),Re,s("h6",He,p(u(c).isLogin===!0?u(c).isPlus===!0?"Plus会员":"普通会员":""),1)]),_:1})]),_:1})])]),_:1}),t(I,{cols:"12",lg:"4",sm:"12",class:"d-flex justify-center order-sml-first"},{default:a(()=>[s("div",Ne,[s("div",We,[t(Be,{size:"100",class:"userImage"},{default:a(()=>[s("div",{innerHTML:u(c).userAvatar,style:{width:"92px",height:"92px"}},null,8,Qe)]),_:1})]),u(c).useremail?(n(),y("h5",Ye,p(u(c).useremail),1)):(n(),y("h5",Ge,"您还未登录")),Je])]),_:1}),A.value?(n(),m(I,{key:0,cols:"12",lg:"4",class:"d-flex align-center justify-center justify-lg-end order-sm-third"},{default:a(()=>[s("div",Ze,[t(z,{icon:"",variant:"flat",size:"x-small",onClick:ne,color:"primary",class:"btn-brand-facebook"},{default:a(()=>[t(u(X),{style:{"font-size":"18px"}})]),_:1}),t(z,{icon:"",variant:"flat",size:"x-small",onClick:F,color:"primary",class:"btn-brand-weixin"},{default:a(()=>[t(u(ee),{style:{"font-size":"18px"}})]),_:1}),t(z,{icon:"",variant:"flat",size:"x-small",onClick:F,color:"primary",style:{"background-color":"#1AAD19!important"}},{default:a(()=>[t(u(te),{style:{"font-size":"18px"}})]),_:1}),t(z,{variant:"flat",onClick:F,color:"primary"},{default:a(()=>[Xe]),_:1})])]),_:1})):g("",!0)]),_:1})])]),_:1}),t($,{class:"d-flex justify-center mt-8"},{default:a(()=>[(n(!0),y(E,null,N(O.value,l=>be((n(),m(I,{cols:"12",md:"3",sm:"6",xl:"3",key:l.caption},{default:a(()=>[t(Q,{elevation:"10",class:"rounded-md pa-sm-8 pa-4"},{default:a(()=>[s("div",et,[s("h2",{class:"text-medium-emphasis text-uppercase mb-6",textContent:p(l.package_name)},null,8,tt),l.package_tag_status?(n(),m(Y,{key:0,size:"small",class:"mt-sm-n4 font-weight-bold",color:"warning"},{default:a(()=>[C(p(l.package_tag),1)]),_:2},1024)):g("",!0),l.package_rate!==100?(n(),m(Y,{key:1,size:"small",class:"mt-sm-n4 font-weight-bold",color:"error"},{default:a(()=>[C("原价："+p(l.package_price),1)]),_:2},1024)):g("",!0)]),s("img",{src:l.package_image,width:"90",height:"90",alt:"icon"},null,8,at),s("div",st,[A.value?(n(),y("sup",ot,"￥")):g("",!0),A.value&&l.package_rate===100?(n(),y("h2",lt,p(l.package_price),1)):g("",!0),A.value&&l.package_rate!==100?(n(),y("h2",nt,p((l.package_price*l.package_rate/100).toFixed(2)),1)):g("",!0),s("span",rt,p(l.package_days)+"天",1)]),t(ze,{class:"mb-0 pl-0 bg-transparent pt-5"},{default:a(()=>[(n(!0),y(E,null,N(l.listtitle,D=>(n(),m(Le,{class:"px-0",key:D.listtitle},{default:a(()=>[t(Oe,{class:"text-body-1 d-flex align-center font-weight-medium text-medium-emphasis"},{default:a(()=>[(n(),m(Se(re(D.feature_icon)),{class:"checkicon"})),C(" "+p(D.feature_title),1)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024),A.value?(n(),m(z,{key:0,color:"primary",size:"large",class:"mt-6",flat:"",block:"",onClick:()=>_e(l)},{default:a(()=>[it]),_:2},1032,["onClick"])):(n(),m(z,{key:1,color:"primary",size:"large",class:"mt-6",flat:"",block:"",onClick:me},{default:a(()=>[ct]),_:1}))]),_:2},1024)]),_:2},1024)),[[Ce,l.package_active]])),128))]),_:1}),t(he,{bodyStyle:"paybox","z-index":"9999",footer:null,centered:"true",open:w.value,"onUpdate:open":o[3]||(o[3]=l=>w.value=l),width:"500px",title:"请选择选择支付方式"},{default:a(()=>[t(ve,{activeKey:h.value,"onUpdate:activeKey":o[2]||(o[2]=l=>h.value=l),type:"card",onTabClick:fe},{default:a(()=>[t(H,{key:"1",tab:"微信支付"},{default:a(()=>[s("h2",null,"支付金额："+p(T.value)+" 元",1),k.value?(n(),m(r,{key:0,status:B.value,value:P.value,color:"#52c41a"},null,8,["status","value"])):g("",!0),k.value?g("",!0):(n(),y("div",ut,[t(L,{type:"primary",onClick:o[0]||(o[0]=l=>q(1)),style:{"background-color":"#3CB371"}},{default:a(()=>[dt]),_:1})])),pt,_t]),_:1}),t(H,{key:"2",tab:"支付宝支付"},{default:a(()=>[s("h2",null,"支付金额："+p(T.value)+" 元",1),k.value?(n(),m(r,{key:0,value:x.value,status:_.value,color:"#1677ff"},null,8,["value","status"])):g("",!0),k.value?g("",!0):(n(),y("div",mt,[t(L,{type:"primary",onClick:o[1]||(o[1]=l=>q(2))},{default:a(()=>[ft]),_:1})])),vt,ht]),_:1})]),_:1},8,["activeKey"])]),_:1},8,["open"]),t(Te)],64)}}};export{Gt as default};
