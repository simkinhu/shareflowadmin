import{_ as Q,a as j}from"./welcome-bg-33b76167.js";import{u as q,i as G}from"../index-fc077a7f.js";import{s as H}from"./pinia-98ec2995.js";import{u as J}from"./userShare-caffbbf0.js";import{_ as W}from"./BaseBreadcrumb.vue_vue_type_style_index_0_lang-5ab39e07.js";import{_ as X}from"./_plugin-vue_export-helper-c27b6911.js";import{f as Y}from"./date-fns-8e15a9c0.js";import{p as Z,D as C,J as tt,K as et,y as h,C as L,l as z,b as E,o as st,n as A,L as at}from"./vuetify-0a3604cc.js";import{r as d,o as $,aS as B,aJ as o,a8 as i,c as e,bl as s,b2 as n,a9 as t,F as U,aQ as R,G as f,d as ot,k as lt,u,a7 as I,a6 as F,aC as it,h as O}from"./@vue-7e44e6dd.js";import{m as k,M as nt}from"./ant-design-vue-32902922.js";import{h as rt}from"./@ant-design-bd925dbd.js";import"./vue-router-0e41780a.js";import"./dayjs-9df2e3b6.js";import"./@multiavatar-7283d2b3.js";import"./axios-6f43ddff.js";/* empty css             */import"./vue3-apexcharts-fb146ff1.js";import"./vue-fdaf27ce.js";import"./apexcharts-a35677a7.js";import"./core-js-40ace11a.js";import"./vue-demi-71ba0ef2.js";import"./@babel-8a290753.js";import"./@ctrl-044b369f.js";import"./resize-observer-polyfill-3d106987.js";import"./@emotion-f7664732.js";import"./stylis-5efc5547.js";import"./scroll-into-view-if-needed-6b992d05.js";import"./compute-scroll-into-view-183f845a.js";import"./vue-types-ef06c517.js";import"./dom-align-529d0cdc.js";import"./lodash-es-5af3e9d7.js";import"./async-validator-dee29e8b.js";import"./throttle-debounce-87e7e444.js";import"./crypto-js-3b32aad8.js";import"./ChatBc-abd90dc1.js";const ct="/list/assets/gold-afe5fc99.png",K="/list/assets/silver-9ec10c43.png";const dt={methods:{format:Y},setup(){const P=[{text:"邀请会员",value:"payer_id"},{text:"奖励类型",value:"reward_type"},{text:"奖励天数",value:"reward_days"},{text:"奖励时间",value:"reward_time"}],r=d([]),y=d(1),l=d(5),V=d(0),b=d(0),c=d(0),g=d(""),x=J(),a=q(),M=d(x.invcode),T=d(""),N=()=>{if(!x.isLogin)return k.error("请先登录后再获取复制邀请链接！"),!1;navigator.clipboard.writeText(T.value).then(()=>{k.success("推广链接已复制到剪贴板")}).catch(m=>{k.error("复制失败，请手动复制")})},w=async m=>{const p=new URLSearchParams;p.append("page",m),p.append("size",l.value);try{const _=window.VITE_API_BASE_URL,v=await G.post(_+"/app/user/invcode",p.toString(),{headers:{"Content-Type":"application/x-www-form-urlencoded"}});r.value=v.data.data.invlist.list,V.value=v.data.data.invlist.total,b.value=v.data.data.count,c.value=Math.ceil(V.value/l.value),T.value=window.location.origin+"/list/#/?share="+x.invcode}catch(_){console.error("Error fetching data:",_)}},D=m=>{y.value=m,w(m)};return $(async()=>{await w(y.value),await a.loadSettingsFromAPI();let m=a.getSetting("invitation_day_enable"),p=a.getSetting("invitation_prop_enable"),_=Number(a.getSetting("invitation_day_days")),v=Number(a.getSetting("invitation_prop_percent"));m&&p?g.value=`邀请好友注册后您的好友成功购买套餐，您将获得 ${_} 天的会员时间续期，以及该套餐的 ${v}% 的会员时间续期。`:m?g.value=`邀请好友注册后您的好友成功购买套餐，您将获得 ${_} 天的会员时间续期。`:p?g.value=`邀请好友注册后您的好友成功购买套餐，您将获得该套餐的 ${v}% 的会员时间续期。`:g.value="邀请好友注册后您的好友成功购买套餐，您将获得奖励。"}),{headers:P,invlist:r,invcode:M,invcontent:g,fullUrl:T,currentPage:y,totalPages:c,usercount:b,userStore:x,copyToClipboard:N,handlePageChange:D}}},_t=t("h3",{class:"mt-5",style:{"font-weight":"bold"}},"邀请好友使用",-1),ut={key:0,class:"text-h6"},mt={key:1,class:"text-h6"},pt={class:"d-flex mt-3 align-center"},ht={class:"text-subtitle-2 opacity-25"},ft=f("复制推广连接");function vt(P,r,y,l,V,b){const c=B("a-input"),g=B("a-button"),x=B("a-input-group");return o(),i(U,null,[e(C,{class:"mt-5"},{default:s(()=>[e(Z,{class:"note-sheet pa-5 pb-4 rounded-md cursor-pointer mb-4"},{default:s(()=>[_t,l.userStore.isLogin?(o(),i("h6",ut," 您已累计邀请 "+n(l.usercount)+" 位好友， 您的邀请码为 "+n(l.invcode)+"， "+n(l.invcontent),1)):(o(),i("h6",mt," 登录即可获取您的专属邀请码， "+n(l.invcontent),1)),t("div",pt,[t("small",ht,n(P.selectedNotice?b.format(new Date(P.selectedNotice.update_time),"yyyy-MM-dd"):""),1)]),e(x,{class:"mt-5",compact:""},{default:s(()=>[e(c,{disabled:"true",value:l.fullUrl,"onUpdate:value":r[0]||(r[0]=a=>l.fullUrl=a),style:{width:"calc(100% - 115px)"}},null,8,["value"]),e(g,{style:{"background-color":"rgb(var(--v-theme-primary)) !important",color:"white"},onClick:l.copyToClipboard},{default:s(()=>[ft]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1}),e(C,{elevation:"0",class:"mt-6 border"},{default:s(()=>[e(tt,{class:"month-table"},{default:s(()=>[t("thead",null,[t("tr",null,[(o(!0),i(U,null,R(l.headers,a=>(o(),i("th",{key:a.value},n(a.text),1))),128))])]),t("tbody",null,[(o(!0),i(U,null,R(l.invlist,a=>(o(),i("tr",{key:a.id},[t("td",null,n(a.user),1),t("td",null,n(a.reward_type===1?"Plus会员":"普通会员"),1),t("td",null,n(a.reward_days),1),t("td",null,n(a.reward_time),1)]))),128))])]),_:1}),e(et,{modelValue:l.currentPage,"onUpdate:modelValue":[r[1]||(r[1]=a=>l.currentPage=a),l.handlePageChange],length:l.totalPages},null,8,["modelValue","length","onUpdate:modelValue"])]),_:1})],64)}const gt=X(dt,[["render",vt]]),xt={class:"d-flex align-center"},yt={key:0,class:"text-h5 mb-0"},bt=f("注销"),wt={key:1,class:"text-h5 ml-4"},St=f(" 欢迎访问用户中心， "),Ct=f("立即登录"),kt=f("免费注册"),Pt={class:"mt-8"},Vt={key:0,class:"d-flex"},Tt=t("div",{class:"text-subtitle-1 textPrimary mt-1"},"剩余天数",-1),Lt={class:"d-flex"},Ut={class:"text-h3 textPrimary"},zt=t("div",{class:"text-subtitle-1 textPrimary mt-1"},"到期时间",-1),It={class:"d-flex"},Bt={class:"text-h3 textPrimary"},Mt={key:1,class:"d-flex"},Nt=t("div",null,[t("div",{class:"d-flex"},[t("h2",{class:"text-h5 textPrimary"},"开通Plus会员可畅享4.0对话 ")]),t("p",{class:"text-subtitle-1"},"GPT4回答次数限制为Open AI限制不保障GPT4回答次数")],-1),Dt=[Nt],Et=t("div",{class:"mb-n2"},[t("img",{src:j,class:"",alt:"image",width:"340"})],-1),At=t("h6",{class:"text-subtitle-1 text-medium-emphasis mb-4"},"会员等级",-1),Ft=t("img",{src:ct,alt:"image",width:"150"},null,-1),Rt=t("h5",{class:"text-h5 pt-3"},"您是尊贵的Plus会员",-1),Ot=t("h6",{class:"text-subtitle-1 text-13 my-4 textSecondary"}," 您已开通Plus会员，全站特权轻松享 ",-1),Gt=f("续费Plus会员"),Jt=t("h6",{class:"text-subtitle-1 text-medium-emphasis mb-4"},"会员等级",-1),$t=t("img",{src:K,alt:"image",width:"150"},null,-1),Kt=t("h5",{class:"text-h5 pt-3"},"您是普通会员",-1),Qt=t("h6",{class:"text-subtitle-1 text-13 my-4 textSecondary"}," 开通Plus会员，尊享多种特权 ",-1),jt=f("开通Plus会员"),qt=t("h6",{class:"text-subtitle-1 text-medium-emphasis mb-4"},"用户标识",-1),Ht=t("img",{src:K,alt:"image",width:"150"},null,-1),Wt=t("h5",{class:"text-h5 pt-3"},"您还没有登录",-1),Xt=t("h6",{class:"text-subtitle-1 text-13 my-4 textSecondary"}," 开通Plus会员，尊享多种特权 ",-1),Yt=f("立即登录开通Plus会员"),Zt=f("最近对话窗口标题概览"),te={class:"recent-transaction mt-10 px-3"},ee={class:"text-body-1 textSecondary text-no-wrap"},se=t("div",{class:"line mx-auto bg-grey100"},null,-1),ae={key:0,class:"text-body-1 font-weight-bold"},oe={key:1,class:"text-body-1 textSecondary"},le={key:1},ie={class:"text-body-1 textSecondary text-no-wrap"},ne=t("div",{class:"line mx-auto bg-grey100"},null,-1),re=t("h6",{class:"text-body-1 font-weight-bold"},"登录查看对话窗口历史",-1),$e=ot({setup(P){const r=J(),{useremail:y,userAvatar:l,expireTime:V,isPlus:b,isLogin:c,expired:g,daysBetween:x}=H(r),a=d([]),M=d({title:"用户中心"}),T=d([{text:"系统主页",disabled:!1,href:"#"},{text:"用户中心",disabled:!0,href:"#"}]);function N(){const p=window.VITE_API_BASE_URL;G.post(p+"/app/user/message",{}).then(_=>{a.value=_.data.data}).catch(_=>{console.error("请求错误:",_)})}function w(){r.loginModal=!0}function D(){r.registModel=!0}function m(){nt.confirm({zIndex:99999,centered:!0,title:"提示？",icon:O(rt),content:O("div",{style:"color:red;"},"你确定退出登录吗？"),onOk(){r.logout(),k.warn("已退出登录，如需再次使用请重新登录")},onCancel(){k.warning("您取消了退出！")}})}return $(()=>{JSON.parse(localStorage.getItem("isLogin")||"false")||(k.warning("您还未登录，清先登录！"),w())}),lt(()=>{c.value?N():a.value=[]}),(p,_)=>{const v=B("CircleIcon");return o(),i(U,null,[e(W,{title:M.value.title,breadcrumbs:T.value},null,8,["title","breadcrumbs"]),e(z,null,{default:s(()=>[e(h,{cols:"12",lg:"8"},{default:s(()=>[e(C,{elevation:"0",rounded:"md",class:"bg-lightprimary border-0"},{default:s(()=>[e(L,{class:"pt-3 pb-0"},{default:s(()=>[e(z,null,{default:s(()=>[e(h,{cols:"12",sm:"6",class:"pt-sm-10 pt-5"},{default:s(()=>[t("div",xt,[u(y)?(o(),i("h5",yt,[f(" 欢迎，"+n(u(y))+" ",1),e(E,{size:"small",class:"ml-2 elevation-0",variant:"elevated",onClick:m},{default:s(()=>[bt]),_:1})])):(o(),i("h5",wt,[St,e(E,{class:"ml-2 elevation-0",size:"small",variant:"elevated",onClick:w},{default:s(()=>[Ct]),_:1}),e(E,{class:"ml-2 elevation-0",size:"small",variant:"elevated",onClick:D},{default:s(()=>[kt]),_:1})]))]),t("div",Pt,[u(c)?(o(),i("div",Vt,[t("div",null,[Tt,t("div",Lt,[t("h2",Ut,n(u(x)),1)])]),e(st,{vertical:"",class:"mx-5"}),t("div",null,[zt,t("div",It,[t("h2",Bt,n(u(V)),1)])])])):I("",!0),u(c)?I("",!0):(o(),i("div",Mt,Dt))])]),_:1}),e(h,{cols:"12",sm:"6",class:"text-sm-right"},{default:s(()=>[Et]),_:1})]),_:1})]),_:1})]),_:1}),e(C,{elevation:"0",rounded:"md",class:"bg-lightsecondary mt-6"},{default:s(()=>[e(Q)]),_:1}),e(gt)]),_:1}),e(h,{cols:"12",lg:"4"},{default:s(()=>[e(C,{elevation:"10",class:"mt-sm-0 mt-6"},{default:s(()=>[u(b)&&u(c)?(o(),F(L,{key:0,class:"text-center"},{default:s(()=>[At,Ft,Rt,Ot,e(A,{flat:"",color:"primary",to:"/user/plus"},{default:s(()=>[Gt]),_:1})]),_:1})):u(c)?(o(),F(L,{key:1,class:"text-center"},{default:s(()=>[Jt,$t,Kt,Qt,e(A,{flat:"",color:"primary",to:"/user/plus"},{default:s(()=>[jt]),_:1})]),_:1})):I("",!0),u(c)?I("",!0):(o(),F(L,{key:2,class:"text-center"},{default:s(()=>[qt,Ht,Wt,Xt,e(A,{flat:"",onClick:w,color:"primary"},{default:s(()=>[Yt]),_:1})]),_:1}))]),_:1}),e(C,{class:"mt-5",elevation:"10"},{default:s(()=>[e(L,null,{default:s(()=>[e(at,{class:"text-h5"},{default:s(()=>[Zt]),_:1}),t("div",te,[u(c)?(o(!0),i(U,{key:0},R(a.value,S=>(o(),i("div",{key:S.title},[e(z,{class:"d-flex mb-4"},{default:s(()=>[e(h,{cols:"4",lg:"3",md:"auto",sm:"auto",class:"px-0 pt-0 pb-1 d-flex align-start"},{default:s(()=>[t("h6",ee,n(S.updateTime_ymd),1)]),_:2},1024),e(h,{cols:"1",sm:"1",class:"px-0 text-center pt-0 pb-1"},{default:s(()=>[e(v,{size:"13",class:it("text-"+S.textcolor)},null,8,["class"]),se]),_:2},1024),e(h,{cols:"7",sm:"8",class:"pt-0 pb-1"},{default:s(()=>[S.boldtext?(o(),i("h6",ae,n(S.title),1)):(o(),i("h6",oe,n(S.title),1))]),_:2},1024)]),_:2},1024)]))),128)):(o(),i("div",le,[e(z,{class:"d-flex mb-4"},{default:s(()=>[e(h,{cols:"4",lg:"3",md:"auto",sm:"auto",class:"px-0 pt-0 pb-1 d-flex align-start"},{default:s(()=>[t("h6",ie,n(new Date().toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"})),1)]),_:1}),e(h,{cols:"1",sm:"1",class:"px-0 text-center pt-0 pb-1"},{default:s(()=>[e(v,{size:"13"}),ne]),_:1}),e(h,{cols:"7",sm:"8",class:"pt-0 pb-1"},{default:s(()=>[re]),_:1})]),_:1})]))])]),_:1})]),_:1})]),_:1})]),_:1})],64)}}});export{$e as default};
