import{u as p}from"./userShare-37435da6.js";import{d as c,aS as n,aJ as m,a6 as d,bl as f,c as u,bn as g,a9 as k}from"./@vue-7e44e6dd.js";import{m as t}from"./ant-design-vue-84efdadc.js";import{_ as h}from"./_plugin-vue_export-helper-c27b6911.js";const T=c({setup(){return{userStore:p()}},data(){return{userTokenInput:""}},methods:{async userlogin(){const e=this.userTokenInput||null;if(!e)return t.warning("请输入您的UserToken"),!1;if(e.length<8)return t.error("UserToken账户需要大于八位字符，请重新输入！"),!1;if(!/^[a-zA-Z0-9]+$/.test(e))return t.error("UserToken账户只支持纯数字或数字与字母组合，请重新输入！"),!1;try{await this.userStore.fetchUserData(e)?(this.userStore.loginModal=!1,t.success("登录成功"),this.userTokenInput=null,this.calculateDaysBetween()):t.error("登录失败，请检查您的UserToken")}catch(o){console.error("登录错误:",o),t.error("登录过程中出现错误")}},calculateDaysBetween(){const e=new Date,o=new Date(this.userStore.expireTime).getTime()-e.getTime();this.userStore.daysBetween=Math.floor(o/(1e3*60*60*24)),this.userStore.expired=this.userStore.daysBetween<=0}}});function w(e,s,o,y,B,C){const a=n("a-alert"),l=n("a-input-password"),i=n("a-modal");return m(),d(i,{style:{top:"40%"},"z-index":"1009",footer:null,open:e.userStore.loginModal,"onUpdate:open":s[2]||(s[2]=r=>e.userStore.loginModal=r),width:"350px",title:"UserToken登录"},{default:f(()=>[u(a,{class:"mt-3",message:"登录自动注册UserToken，有Token直接登录",type:"warning"}),u(a,{class:"mt-3",message:"UserToken：属唯一标识，丢失无法找回",type:"error"}),u(l,{class:"mt-5",value:e.userTokenInput,"onUpdate:value":s[0]||(s[0]=r=>e.userTokenInput=r),placeholder:"请输入您的UserToken",onKeyup:g(e.userlogin,["enter"])},null,8,["value","onKeyup"]),k("button",{class:"mt-5 loginbutton",onClick:s[1]||(s[1]=(...r)=>e.userlogin&&e.userlogin(...r))},"立即登录")]),_:1},8,["open"])}const D=h(T,[["render",w]]);export{D as l};
