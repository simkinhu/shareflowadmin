import{u as a}from"./userShare-d3dda1b7.js";import{u as n}from"../index-96439228.js";import{d as i,r as u,o as l}from"./@vue-7e44e6dd.js";import{m as s}from"./ant-design-vue-32902922.js";const f=i({setup(){const r=a(),e=n(),t=u(0);return l(async()=>{await e.loadSettingsFromAPI(),t.value=Number(e.getSetting("new_user_days"))}),{userStore:r,newuserdays:t}},data(){return{useremail:"",password:""}},methods:{async userlogin(){const r=this.useremail||null,e=this.password||null;if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r))return s.warning("请输入有效的电子邮箱"),!1;if(this.password.length<8){s.warning("用户密码必须大于8位字符，请重新输入");return}if(!e)return s.warning("请输入您的账户密码"),!1;try{await this.userStore.fetchUserData(r,e)?(this.userStore.loginModal=!1,s.success("登录成功"),this.useremail=null,this.password=null):s.error("登录失败，请检查您的账户和密码")}catch(o){console.error("登录错误:",o),s.error("登录过程中出现错误")}},registModel(){this.userStore.registModel=!0,this.userStore.loginModal=!1},passModel(){this.userStore.passModel=!0,this.userStore.loginModal=!1}}});export{f as _};
