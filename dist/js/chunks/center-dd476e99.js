import{_ as X,a as Y}from"./welcome-bg-2000d4b1.js";import{u as K,i as Q}from"../index-a1ae2b62.js";import{s as Z}from"./pinia-98ec2995.js";import{u as j}from"./userShare-3443f802.js";import{_ as $}from"./BaseBreadcrumb.vue_vue_type_style_index_0_lang-5ab39e07.js";import{_ as tt}from"./_plugin-vue_export-helper-c27b6911.js";import{f as et}from"./date-fns-8e15a9c0.js";import{p as st,D as C,J as O,K as at,y as h,C as I,l as R,b as G,o as ot,n as J,L as lt}from"./vuetify-0a3604cc.js";import{r as c,o as q,aS as A,aJ as a,a8 as n,c as e,bl as s,b2 as i,a9 as t,a6 as M,F as k,aQ as B,G as f,d as nt,k as it,u as _,a7 as z,aC as rt,h as H}from"./@vue-7e44e6dd.js";import{m as T,M as ct}from"./ant-design-vue-32902922.js";import{h as dt}from"./@ant-design-bd925dbd.js";import"./vue-router-0e41780a.js";import"./dayjs-9df2e3b6.js";import"./@multiavatar-7283d2b3.js";import"./axios-6f43ddff.js";/* empty css             */import"./vue3-apexcharts-fb146ff1.js";import"./vue-fdaf27ce.js";import"./apexcharts-a35677a7.js";import"./core-js-40ace11a.js";import"./vue-demi-71ba0ef2.js";import"./@babel-8a290753.js";import"./@ctrl-044b369f.js";import"./resize-observer-polyfill-3d106987.js";import"./@emotion-f7664732.js";import"./stylis-5efc5547.js";import"./scroll-into-view-if-needed-6b992d05.js";import"./compute-scroll-into-view-183f845a.js";import"./vue-types-ef06c517.js";import"./dom-align-529d0cdc.js";import"./lodash-es-5af3e9d7.js";import"./async-validator-dee29e8b.js";import"./throttle-debounce-87e7e444.js";import"./crypto-js-3b32aad8.js";import"./ChatBc-abd90dc1.js";const ut="/list/assets/gold-afe5fc99.png",W="/list/assets/silver-9ec10c43.png";const _t={methods:{format:et},setup(){const w=[{text:"邀请会员",value:"payer_id"},{text:"奖励类型",value:"reward_type"},{text:"奖励天数",value:"reward_days"},{text:"奖励时间",value:"reward_time"}],u=c([]),m=c(1),l=c(5),N=c(0),S=c(0),P=c(0),r=c(""),v=j(),g=K(),o=c(v.invcode),U=c(""),L=()=>{if(!v.isLogin)return T.error("请先登录后再获取复制邀请链接！"),!1;navigator.clipboard.writeText(U.value).then(()=>{T.success("推广链接已复制到剪贴板")}).catch(d=>{T.error("复制失败，请手动复制")})},D=async d=>{const x=new URLSearchParams;x.append("page",d),x.append("size",l.value);try{const y=window.VITE_API_BASE_URL,p=await Q.post(y+"/app/user/invcode",x.toString(),{headers:{"Content-Type":"application/x-www-form-urlencoded"}});u.value=p.data.data.invlist.list,N.value=p.data.data.invlist.total,S.value=p.data.data.count,P.value=Math.ceil(N.value/l.value),o.value=v.invcode,U.value=window.location.origin+"/list/#/?share="+v.invcode}catch(y){console.error("Error fetching data:",y)}},F=d=>{m.value=d,D(d)};return q(async()=>{o.value=v.invcode,await D(m.value),await g.loadSettingsFromAPI();let d=g.getSetting("invitation_day_enable"),x=g.getSetting("invitation_prop_enable"),y=Number(g.getSetting("invitation_day_days")),p=Number(g.getSetting("invitation_prop_percent"));d&&x?r.value=`邀请好友注册后您的好友成功购买套餐，您将获得 ${y} 天的会员时间续期，以及该套餐的 ${p}% 的会员时间续期。`:d?r.value=`邀请好友注册后您的好友成功购买套餐，您将获得 ${y} 天的会员时间续期。`:x?r.value=`邀请好友注册后您的好友成功购买套餐，您将获得该套餐的 ${p}% 的会员时间续期。`:r.value="邀请好友注册后您的好友成功购买套餐，您将获得奖励。"}),{headers:w,invlist:u,invcode:o,invcontent:r,fullUrl:U,currentPage:m,totalPages:P,usercount:S,userStore:v,copyToClipboard:L,handlePageChange:F}}},mt=t("h3",{class:"mt-5",style:{"font-weight":"bold"}},"邀请好友使用",-1),pt={key:0,class:"text-h6"},ht={key:1,class:"text-h6"},ft={class:"d-flex mt-3 align-center"},vt={class:"text-subtitle-2 opacity-25"},gt=f("复制推广连接"),xt={class:"mt-5 pb-5"};function yt(w,u,m,l,N,S){const P=A("a-input"),r=A("a-button"),v=A("a-input-group"),g=A("a-empty");return a(),n(k,null,[e(C,{class:"mt-5",elevation:"10"},{default:s(()=>[e(st,{class:"note-sheet pa-5 pb-4 rounded-md cursor-pointer mb-4"},{default:s(()=>[mt,l.userStore.isLogin?(a(),n("h6",pt," 您已累计邀请 "+i(l.usercount)+" 位好友， 您的邀请码为 "+i(l.invcode)+"， "+i(l.invcontent),1)):(a(),n("h6",ht," 登录即可获取您的专属邀请码， "+i(l.invcontent),1)),t("div",ft,[t("small",vt,i(w.selectedNotice?S.format(new Date(w.selectedNotice.update_time),"yyyy-MM-dd"):""),1)]),e(v,{class:"mt-5",compact:""},{default:s(()=>[e(P,{disabled:"true",value:l.fullUrl,"onUpdate:value":u[0]||(u[0]=o=>l.fullUrl=o),style:{width:"calc(100% - 115px)"}},null,8,["value"]),e(r,{style:{"background-color":"rgb(var(--v-theme-primary)) !important",color:"white"},onClick:l.copyToClipboard},{default:s(()=>[gt]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1}),l.invlist&&l.invlist.length>0?(a(),M(C,{key:0,elevation:"10",class:"mt-5"},{default:s(()=>[e(O,{class:"month-table"},{default:s(()=>[t("thead",null,[t("tr",null,[(a(!0),n(k,null,B(l.headers,o=>(a(),n("th",{key:o.value},i(o.text),1))),128))])]),t("tbody",null,[(a(!0),n(k,null,B(l.invlist,o=>(a(),n("tr",{key:o.id},[t("td",null,i(o.user),1),t("td",null,i(o.reward_type===1?"Plus会员":"普通会员"),1),t("td",null,i(o.reward_days),1),t("td",null,i(o.reward_time),1)]))),128))])]),_:1}),e(at,{modelValue:l.currentPage,"onUpdate:modelValue":[u[1]||(u[1]=o=>l.currentPage=o),l.handlePageChange],length:l.totalPages},null,8,["modelValue","length","onUpdate:modelValue"])]),_:1})):(a(),M(C,{key:1,elevation:"10",class:"mt-5"},{default:s(()=>[e(O,{class:"month-table"},{default:s(()=>[t("thead",null,[t("tr",null,[(a(!0),n(k,null,B(l.headers,o=>(a(),n("th",{key:o.value},i(o.text),1))),128))])])]),_:1}),e(O,null,{default:s(()=>[t("thead",null,[t("tr",null,[(a(!0),n(k,null,B(w.columns,o=>(a(),n("th",{key:o.title},i(o.title),1))),128))])])]),_:1}),t("div",xt,[e(g,{image:w.simpleImage},null,8,["image"])])]),_:1}))],64)}const bt=tt(_t,[["render",yt]]),wt={class:"d-flex align-center"},St={key:0,class:"text-h5 mb-0"},kt=f("注销"),Ct={key:1,class:"text-h5 ml-4"},Pt=f(" 欢迎访问用户中心， "),Vt=f("立即登录"),Tt=f("免费注册"),Ut={class:"mt-8"},Lt={key:0,class:"d-flex"},It=t("div",{class:"text-subtitle-1 textPrimary mt-1"},"剩余天数",-1),zt={class:"d-flex"},At={class:"text-h3 textPrimary"},Bt=t("div",{class:"text-subtitle-1 textPrimary mt-1"},"到期时间",-1),Mt={class:"d-flex"},Nt={class:"text-h3 textPrimary"},Dt={key:1,class:"d-flex"},Et=t("div",null,[t("div",{class:"d-flex"},[t("h2",{class:"text-h5 textPrimary"},"开通Plus会员可畅享4.0对话 ")]),t("p",{class:"text-subtitle-1"},"GPT4回答次数限制为Open AI限制不保障GPT4回答次数")],-1),Rt=[Et],Ft=t("div",{class:"mb-n2"},[t("img",{src:Y,class:"",alt:"image",width:"340"})],-1),Ot={key:0},Gt=t("h6",{class:"text-subtitle-1 text-medium-emphasis mb-4"},"会员等级",-1),Jt=t("img",{src:ut,alt:"image",width:"150"},null,-1),Ht=t("h5",{class:"text-h5 pt-3"},"您是尊贵的Plus会员",-1),Kt=t("h6",{class:"text-subtitle-1 text-13 my-4 textSecondary"}," 您已开通Plus会员，全站特权轻松享 ",-1),Qt=f("续费Plus会员"),jt=t("h6",{class:"text-subtitle-1 text-medium-emphasis mb-4"},"会员等级",-1),qt=t("img",{src:W,alt:"image",width:"150"},null,-1),Wt=t("h5",{class:"text-h5 pt-3"},"您是普通会员",-1),Xt=t("h6",{class:"text-subtitle-1 text-13 my-4 textSecondary"}," 开通Plus会员，尊享多种特权 ",-1),Yt=f("开通Plus会员"),Zt=t("h6",{class:"text-subtitle-1 text-medium-emphasis mb-4"},"用户标识",-1),$t=t("img",{src:W,alt:"image",width:"150"},null,-1),te=t("h5",{class:"text-h5 pt-3"},"您还没有登录",-1),ee=t("h6",{class:"text-subtitle-1 text-13 my-4 textSecondary"}," 开通Plus会员，尊享多种特权 ",-1),se=f("立即登录开通Plus会员"),ae=f("最近对话窗口标题概览"),oe={class:"recent-transaction mt-10 px-3"},le={class:"text-body-1 textSecondary text-no-wrap"},ne=t("div",{class:"line mx-auto bg-grey100"},null,-1),ie={key:0,class:"text-body-1 font-weight-bold"},re={key:1,class:"text-body-1 textSecondary"},ce={key:1},de={class:"text-body-1 textSecondary text-no-wrap"},ue=t("div",{class:"line mx-auto bg-grey100"},null,-1),_e=t("h6",{class:"text-body-1 font-weight-bold"},"登录查看对话窗口历史",-1),qe=nt({setup(w){const u=K(),m=j(),{useremail:l,userAvatar:N,expireTime:S,isPlus:P,isLogin:r,expired:v,daysBetween:g}=Z(m),o=c([]),U=c({title:"用户中心"}),L=c(!1),D=c([{text:"系统主页",disabled:!1,href:"#"},{text:"用户中心",disabled:!0,href:"#"}]);function F(){const p=window.VITE_API_BASE_URL;Q.post(p+"/app/user/message",{}).then(V=>{o.value=V.data.data}).catch(V=>{console.error("请求错误:",V)})}function d(){m.loginModal=!0}function x(){m.registModel=!0}function y(){ct.confirm({zIndex:99999,centered:!0,title:"提示？",icon:H(dt),content:H("div",{style:"color:red;"},"你确定退出登录吗？"),onOk(){m.logout(),T.warn("已退出登录，如需再次使用请重新登录")},onCancel(){T.warning("您取消了退出！")}})}return q(()=>{if(JSON.parse(localStorage.getItem("isLogin")||"false")||(T.warning("您还未登录，清先登录！"),d()),r.value&&S.value&&m.fetchUserData(),u.getSetting("paymentSwitch")){const V=new URL(window.location.href).hostname,E=u.getSetting("domainAddress"),b=u.getSetting("navSwitchAll");V===E||b===!1?L.value=!0:L.value=!1}}),it(()=>{r.value?F():o.value=[]}),(p,V)=>{const E=A("CircleIcon");return a(),n(k,null,[e($,{title:U.value.title,breadcrumbs:D.value},null,8,["title","breadcrumbs"]),e(R,null,{default:s(()=>[e(h,{cols:"12",lg:"8"},{default:s(()=>[e(C,{elevation:"0",rounded:"md",class:"bg-lightprimary border-0"},{default:s(()=>[e(I,{class:"pt-3 pb-0"},{default:s(()=>[e(R,null,{default:s(()=>[e(h,{cols:"12",sm:"6",class:"pt-sm-10 pt-5"},{default:s(()=>[t("div",wt,[_(l)?(a(),n("h5",St,[f(" 欢迎，"+i(_(l))+" ",1),e(G,{size:"small",class:"ml-2 elevation-0",variant:"elevated",onClick:y},{default:s(()=>[kt]),_:1})])):(a(),n("h5",Ct,[Pt,e(G,{class:"ml-2 elevation-0",size:"small",variant:"elevated",onClick:d},{default:s(()=>[Vt]),_:1}),e(G,{class:"ml-2 elevation-0",size:"small",variant:"elevated",onClick:x},{default:s(()=>[Tt]),_:1})]))]),t("div",Ut,[_(r)?(a(),n("div",Lt,[t("div",null,[It,t("div",zt,[t("h2",At,i(_(g)),1)])]),e(ot,{vertical:"",class:"mx-5"}),t("div",null,[Bt,t("div",Mt,[t("h2",Nt,i(_(S)),1)])])])):z("",!0),_(r)?z("",!0):(a(),n("div",Dt,Rt))])]),_:1}),e(h,{cols:"12",sm:"6",class:"text-sm-right"},{default:s(()=>[Ft]),_:1})]),_:1})]),_:1})]),_:1}),e(C,{elevation:"0",rounded:"md",class:"bg-lightsecondary mt-6"},{default:s(()=>[e(X)]),_:1}),L.value?(a(),n("div",Ot,[e(bt)])):z("",!0)]),_:1}),e(h,{cols:"12",lg:"4"},{default:s(()=>[e(C,{elevation:"10",class:"mt-sm-0 mt-6"},{default:s(()=>[_(P)&&_(r)?(a(),M(I,{key:0,class:"text-center"},{default:s(()=>[Gt,Jt,Ht,Kt,e(J,{flat:"",color:"primary",to:"/user/plus"},{default:s(()=>[Qt]),_:1})]),_:1})):_(r)?(a(),M(I,{key:1,class:"text-center"},{default:s(()=>[jt,qt,Wt,Xt,e(J,{flat:"",color:"primary",to:"/user/plus"},{default:s(()=>[Yt]),_:1})]),_:1})):z("",!0),_(r)?z("",!0):(a(),M(I,{key:2,class:"text-center"},{default:s(()=>[Zt,$t,te,ee,e(J,{flat:"",onClick:d,color:"primary"},{default:s(()=>[se]),_:1})]),_:1}))]),_:1}),e(C,{class:"mt-5",elevation:"10"},{default:s(()=>[e(I,null,{default:s(()=>[e(lt,{class:"text-h5"},{default:s(()=>[ae]),_:1}),t("div",oe,[_(r)?(a(!0),n(k,{key:0},B(o.value,b=>(a(),n("div",{key:b.title},[e(R,{class:"d-flex mb-4"},{default:s(()=>[e(h,{cols:"4",lg:"3",md:"auto",sm:"auto",class:"px-0 pt-0 pb-1 d-flex align-start"},{default:s(()=>[t("h6",le,i(b.updateTime_ymd),1)]),_:2},1024),e(h,{cols:"1",sm:"1",class:"px-0 text-center pt-0 pb-1"},{default:s(()=>[e(E,{size:"13",class:rt("text-"+b.textcolor)},null,8,["class"]),ne]),_:2},1024),e(h,{cols:"7",sm:"8",class:"pt-0 pb-1"},{default:s(()=>[b.boldtext?(a(),n("h6",ie,i(b.title),1)):(a(),n("h6",re,i(b.title),1))]),_:2},1024)]),_:2},1024)]))),128)):(a(),n("div",ce,[e(R,{class:"d-flex mb-4"},{default:s(()=>[e(h,{cols:"4",lg:"3",md:"auto",sm:"auto",class:"px-0 pt-0 pb-1 d-flex align-start"},{default:s(()=>[t("h6",de,i(new Date().toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"})),1)]),_:1}),e(h,{cols:"1",sm:"1",class:"px-0 text-center pt-0 pb-1"},{default:s(()=>[e(E,{size:"13"}),ue]),_:1}),e(h,{cols:"7",sm:"8",class:"pt-0 pb-1"},{default:s(()=>[_e]),_:1})]),_:1})]))])]),_:1})]),_:1})]),_:1})]),_:1})],64)}}});export{qe as default};
