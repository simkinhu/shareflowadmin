import{i as v}from"../index-962db1df.js";import{_ as L}from"./BaseBreadcrumb.vue_vue_type_style_index_0_lang-598769be.js";import{u as P}from"./userShare-c9b2675c.js";import{s as U}from"./pinia-98ec2995.js";import{d as z,r as p,o as N,k as A,aS as _,aJ as o,a8 as i,c as F,a6 as u,bl as h,b2 as m,G as V,F as J}from"./@vue-7e44e6dd.js";import{m as M}from"./ant-design-vue-84efdadc.js";import"./vue-router-0e41780a.js";import"./dayjs-c3e478c5.js";import"./@multiavatar-7283d2b3.js";import"./axios-6f43ddff.js";import"./vuetify-574a8d14.js";/* empty css             */import"./vue3-apexcharts-fb146ff1.js";import"./vue-fdaf27ce.js";import"./apexcharts-a35677a7.js";import"./core-js-40ace11a.js";import"./vue-demi-71ba0ef2.js";import"./@ant-design-05eaf6fc.js";import"./@ctrl-044b369f.js";import"./@babel-692ca2d6.js";import"./resize-observer-polyfill-3d106987.js";import"./@emotion-f7664732.js";import"./stylis-5efc5547.js";import"./scroll-into-view-if-needed-6b992d05.js";import"./compute-scroll-into-view-183f845a.js";import"./vue-types-ef06c517.js";import"./dom-align-529d0cdc.js";import"./lodash-es-5af3e9d7.js";import"./async-validator-dee29e8b.js";import"./throttle-debounce-87e7e444.js";import"./ChatBc-abd90dc1.js";import"./crypto-js-3b32aad8.js";const R={key:0},$={key:1},O={key:2},D={key:4},G={key:5},Se=z({setup(Q){const y=P(),{isLogin:x}=U(y),r=p([]),g=p(0),d=p(1),c=p(10),f=p(new Map),k=async(e=1,n=10)=>{const l=window.VITE_API_BASE_URL;try{const t=await v.post(l+`/app/user/order?page=${e}&size=${n}`);t.data.code===1?(r.value=t.data.data.list||[],g.value=t.data.data.total||0):(r.value=[],console.error("请求错误:",t.data.message))}catch(t){r.value=[],console.error("请求错误:",t)}},I=async()=>{const e=window.VITE_API_BASE_URL;try{const n=await v.post(e+"/app/user/svip",{});n.data.code===1?n.data.data.forEach(t=>{f.value.set(t.id,t.package_name)}):console.error("请求错误:",n.data.message)}catch(n){console.error("请求错误:",n)}};N(()=>{JSON.parse(localStorage.getItem("isLogin")||"false")||(M.warning("您还未登录，请先登录"),y.loginModal=!0)}),A(()=>{x.value?(k(d.value,c.value),I()):r.value=[]});function w(e){return e===1?"微信支付":e===2?"支付宝支付":"第三方支付"}function S(e){return e===1?"已支付":e===0?"未支付":e}const b=p({title:"订单历史"}),T=[{text:"系统主页",href:"/"},{text:"订单历史",href:"/user/order",disabled:!0}],B=[{title:"UserToken",dataIndex:"user_token",key:"user_token"},{title:"订单号",dataIndex:"order_no",key:"order_no"},{title:"创建时间",dataIndex:"pay_datatime",key:"pay_datatime"},{title:"激活套餐",dataIndex:"product_id",key:"product_id"},{title:"支付金额",dataIndex:"payment_amount",key:"payment_amount",width:100},{title:"支付状态",dataIndex:"payment_status",key:"payment_status"},{title:"支付渠道",dataIndex:"payment_type",key:"payment_type"},{title:"支付时间",dataIndex:"payment_completed_at",key:"payment_completed_at",width:210}],C=e=>{d.value=e.current,c.value=e.pageSize,k(d.value,c.value)};return(e,n)=>{const l=_("a-tag"),t=_("a-table"),E=_("a-empty");return o(),i(J,null,[F(L,{title:b.value.title,breadcrumbs:T},null,8,["title"]),r.value&&r.value.length>0?(o(),u(t,{key:0,columns:B,"data-source":r.value,"row-key":"id",scroll:{x:"max-content",y:"calc(100vh - 200px)"},pagination:{total:g.value,current:d.value,pageSize:c.value,showSizeChanger:!0,showQuickJumper:!0},onChange:C},{bodyCell:h(({column:s,record:a})=>[s.dataIndex==="pay_datatime"?(o(),i("span",R,m(a.pay_datatime?a.pay_datatime.replace("T"," "):""),1)):s.dataIndex==="payment_completed_at"?(o(),i("span",$,m(a.payment_completed_at?a.payment_completed_at.replace("T"," "):"未支付"),1)):s.dataIndex==="product_id"?(o(),i("span",O,m(f.value.get(a.product_id)||"未知套餐"),1)):s.dataIndex==="payment_status"?(o(),u(l,{key:3,color:a.payment_status===1?"green":"red"},{default:h(()=>[V(m(S(a.payment_status)),1)]),_:2},1032,["color"])):s.dataIndex==="payment_type"?(o(),i("span",D,m(w(a.payment_type)),1)):(o(),i("span",G,m(a[s.dataIndex]),1))]),_:1},8,["data-source","scroll","pagination"])):(o(),u(E,{key:1,description:"暂无数据"}))],64)}}});export{Se as default};
