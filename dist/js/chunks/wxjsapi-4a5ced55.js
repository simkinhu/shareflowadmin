import{i as d}from"../index-dd91c33b.js";import{w as o}from"./weixin-js-sdk-75a505cb.js";import{r as i,o as l,aJ as u,a8 as g,a9 as p}from"./@vue-7e44e6dd.js";import"./pinia-98ec2995.js";import"./vue-demi-71ba0ef2.js";import"./vue-router-0e41780a.js";import"./ant-design-vue-84efdadc.js";import"./@ant-design-05eaf6fc.js";import"./@ctrl-044b369f.js";import"./@babel-692ca2d6.js";import"./resize-observer-polyfill-3d106987.js";import"./@emotion-f7664732.js";import"./stylis-5efc5547.js";import"./scroll-into-view-if-needed-6b992d05.js";import"./compute-scroll-into-view-183f845a.js";import"./vue-types-ef06c517.js";import"./dom-align-529d0cdc.js";import"./lodash-es-5af3e9d7.js";import"./dayjs-c3e478c5.js";import"./@multiavatar-7283d2b3.js";import"./async-validator-dee29e8b.js";import"./throttle-debounce-87e7e444.js";import"./axios-6f43ddff.js";import"./vuetify-574a8d14.js";/* empty css             */import"./vue3-apexcharts-fb146ff1.js";import"./vue-fdaf27ce.js";import"./apexcharts-a35677a7.js";import"./core-js-40ace11a.js";const f=p("h1",null,"微信支付页面",-1),F={setup(y){const e=i(""),s=i(""),n=i(""),c=()=>{const a=window.location.hash.substring(1).split("?")[1],t=new URLSearchParams(a);e.value=t.get("code"),s.value=t.get("orderno")},m=async()=>{if(!e.value){alert("微信code未获取到");return}const r=window.VITE_API_BASE_URL,a=await d.post(`${r}/app/call/jsapipay`,{code:e.value,orderno:s.value});n.value=a.data.data.prepay_id,o.config({debug:!0,appId:a.data.data.appId,timestamp:a.data.data.timestamp,nonceStr:a.data.data.nonceStr,signature:a.data.data.paySign,jsApiList:["chooseWXPay"]}),o.ready(()=>{o.checkJsApi({jsApiList:["chooseWXPay"],success:function(t){console.log("seccess"),console.log("hskdjskjk",t)},fail:function(t){console.log("fail"),console.log(t)}}),o.chooseWXPay({nonceStr:a.data.data.nonceStr,package:`prepay_id=${n.value}`,signType:"RSA",paySign:a.data.data.paySign,timestamp:a.data.data.timestamp,success:function(t){alert(t)},fail:function(t){alert("支付失败"),alert(t.errMsg)}})}),o.error(t=>{alert(t)})};return l(()=>{c()}),(r,a)=>(u(),g("div",null,[f,p("button",{onClick:m},"发起支付")]))}};export{F as default};
