import{i as M}from"../index-db19710b.js";import{_ as U}from"./BaseBreadcrumb.vue_vue_type_style_index_0_lang-5d13d757.js";import{u as A}from"./userShare-30965624.js";import{s as D}from"./pinia-98ec2995.js";import{E as $}from"./ant-design-vue-32902922.js";import{b as j,I as h,w as z,J as F,B as G,C as V}from"./vuetify-e7ea846c.js";import{d as J,r as m,j as Q,w as q,aS as H,aJ as a,a8 as o,c as d,a6 as v,bl as p,a9 as l,F as r,aQ as c,b2 as i,G as _,u as w}from"./@vue-7e44e6dd.js";import"./vue-router-0e41780a.js";import"./dayjs-9df2e3b6.js";import"./@multiavatar-7283d2b3.js";import"./axios-6f43ddff.js";/* empty css             */import"./vue3-apexcharts-fb146ff1.js";import"./vue-fdaf27ce.js";import"./apexcharts-a35677a7.js";import"./core-js-40ace11a.js";import"./vue-demi-71ba0ef2.js";import"./@babel-8a290753.js";import"./@ant-design-bd925dbd.js";import"./@ctrl-044b369f.js";import"./resize-observer-polyfill-3d106987.js";import"./@emotion-f7664732.js";import"./stylis-5efc5547.js";import"./scroll-into-view-if-needed-6b992d05.js";import"./compute-scroll-into-view-183f845a.js";import"./vue-types-ef06c517.js";import"./dom-align-529d0cdc.js";import"./lodash-es-5af3e9d7.js";import"./async-validator-dee29e8b.js";import"./throttle-debounce-87e7e444.js";import"./ChatBc-abd90dc1.js";import"./crypto-js-3b32aad8.js";const K=l("div",{class:"pt-2"},null,-1),be=J({setup(O){const E=$.PRESENTED_IMAGE_SIMPLE,P=A(),{isLogin:S}=D(P),s=m([]),x=m(0),u=m(1),f=m(10),b=m(new Map),C=Q(()=>Math.ceil(x.value/f.value)),I=async(t=1,y=10)=>{const k=window.VITE_API_BASE_URL;try{const[e]=await Promise.all([M.post(k+`/app/user/order?page=${t}&size=${y}`)]);e.data.code===200?(s.value=e.data.data.list||[],x.value=e.data.data.total||0):(s.value=[],console.error("请求错误:",e.data.message))}catch(e){s.value=[],console.error("请求错误:",e)}};q(S,t=>{t?I(u.value,f.value):s.value=[]},{immediate:!0});const B=t=>t===1?"微信支付":t===2?"支付宝支付":"第三方支付",T=t=>t===1?"已支付":t===0?"未支付":t,N=m({title:"订单历史"}),R=[{text:"系统主页",href:"/"},{text:"订单历史",href:"/user/order",disabled:!0}],g=[{title:"用户名",dataIndex:"user",key:"user"},{title:"订单号",dataIndex:"order_no",key:"order_no"},{title:"创建时间",dataIndex:"pay_datatime",key:"pay_datatime"},{title:"激活套餐",dataIndex:"package_name",key:"package_name",width:100},{title:"支付金额",dataIndex:"payment_amount",key:"payment_amount",width:100},{title:"支付状态",dataIndex:"payment_status",key:"payment_status"},{title:"支付渠道",dataIndex:"payment_type",key:"payment_type"},{title:"支付时间",dataIndex:"payment_completed_at",key:"payment_completed_at",width:210}],L=t=>{u.value=t,I(u.value,f.value)};return(t,y)=>{const k=H("a-empty");return a(),o(r,null,[d(U,{title:N.value.title,breadcrumbs:R},null,8,["title"]),s.value&&s.value.length>0?(a(),v(V,{key:0,elevation:"10"},{default:p(()=>[d(h,null,{default:p(()=>[l("thead",null,[l("tr",null,[(a(),o(r,null,c(g,e=>l("th",{key:e.title},i(e.title),1)),64))])]),l("tbody",null,[(a(!0),o(r,null,c(s.value,e=>(a(),o("tr",{key:e.id},[(a(),o(r,null,c(g,n=>l("td",{key:n.key},[n.dataIndex==="pay_datatime"||n.dataIndex==="payment_completed_at"?(a(),o(r,{key:0},[_(i(e[n.dataIndex]?e[n.dataIndex].replace("T"," "):n.dataIndex==="payment_completed_at"?"未支付":""),1)],64)):n.dataIndex==="product_id"?(a(),o(r,{key:1},[_(i(b.value.get(e.product_id)||"未知套餐"),1)],64)):n.dataIndex==="payment_status"?(a(),v(j,{key:2,color:e.payment_status===1?"green":"red"},{default:p(()=>[_(i(T(e.payment_status)),1)]),_:2},1032,["color"])):n.dataIndex==="payment_type"?(a(),o(r,{key:3},[_(i(B(e.payment_type)),1)],64)):(a(),o(r,{key:4},[_(i(e[n.dataIndex]),1)],64))])),64))]))),128))])]),_:1}),d(G,{justify:"center"},{default:p(()=>[d(z,{cols:"12"},{default:p(()=>[d(F,{modelValue:u.value,"onUpdate:modelValue":[y[0]||(y[0]=e=>u.value=e),L],length:w(C)},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})):(a(),v(V,{key:1,elevation:"10"},{default:p(()=>[d(h,null,{default:p(()=>[l("thead",null,[l("tr",null,[(a(),o(r,null,c(g,e=>l("th",{key:e.title},i(e.title),1)),64))])])]),_:1}),d(k,{image:w(E)},null,8,["image"]),K]),_:1}))],64)}}});export{be as default};
